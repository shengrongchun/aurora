(function(t){function e(e){for(var n,s,l=e[0],o=e[1],c=e[2],u=0,d=[];u<l.length;u++)s=l[u],i[s]&&d.push(i[s][0]),i[s]=0;for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n]);p&&p(e);while(d.length)d.shift()();return r.push.apply(r,c||[]),a()}function a(){for(var t,e=0;e<r.length;e++){for(var a=r[e],n=!0,s=1;s<a.length;s++){var l=a[s];0!==i[l]&&(n=!1)}n&&(r.splice(e--,1),t=o(o.s=a[0]))}return t}var n={},s={app:0},i={app:0},r=[];function l(t){return o.p+"js/"+({}[t]||t)+"."+{"chunk-0e1e8dcd":"09fe9aa9","chunk-18f53b40":"3b7d2502","chunk-1d913ad0":"d4ed757c","chunk-1c73bd66":"7db85b11","chunk-361ea255":"c1fa32af","chunk-c7119f6e":"2f8f729b","chunk-2572e239":"e9e21e5b","chunk-2cfa81ea":"fa451fc8","chunk-410d3140":"06ab3d60","chunk-48899312":"4b461e54","chunk-79c4e326":"c5701e8e","chunk-0b65ffb6":"29107283","chunk-12950967":"8b99e4d1","chunk-2d0a3577":"16d9b83b","chunk-2d0a43df":"49da2e17","chunk-2d0aa90c":"1482f4dc","chunk-2d0aab07":"a764689b","chunk-2d0abc00":"ce8d1179","chunk-2d0ae937":"1450f837","chunk-2d0aeb45":"1b2c2abb","chunk-2d0af08c":"b8e83cab","chunk-2d0afa49":"4ce7cad5","chunk-2d0b6187":"6b3ac0d0","chunk-2d0ba136":"b9cd2bba","chunk-2d0bb267":"dcecdb78","chunk-2d0bcec1":"1d1478e9","chunk-2d0bdf38":"551001da","chunk-2d0bff92":"79c93130","chunk-2d0c0494":"36b9e8cd","chunk-2d0c0a09":"7085bd06","chunk-2d0c4313":"e66b8b17","chunk-2d0c46d1":"c39ba4c5","chunk-2d0c512b":"30feb8e6","chunk-2d0cf16e":"3c97c02e","chunk-2d0d056d":"f5fd94b2","chunk-2d0d0645":"30fe6328","chunk-2d0d2f22":"ee1277b1","chunk-2d0d61fd":"a5265e80","chunk-2d0d7e63":"f11aef30","chunk-2d0e1b57":"e5113174","chunk-2d0e1fbe":"392b0c77","chunk-2d0e22d6":"382a0482","chunk-2d0e542a":"7afa4dfe","chunk-2d0e57ec":"1fb0c1a3","chunk-2d0e6553":"330249fd","chunk-2d0e6c86":"80621ef3","chunk-2d0ea098":"457401f5","chunk-2d0f0a11":"444549a6","chunk-2d208ac5":"8c18a2c4","chunk-2d209408":"f31049aa","chunk-2d20f745":"f72133e3","chunk-2d20ff23":"19a545e5","chunk-2d2138c7":"da60cdab","chunk-2d216f3b":"4e311deb","chunk-2d217e5b":"45af71bf","chunk-2d21b84a":"a6e7ba09","chunk-2d21dcd2":"f61af4de","chunk-2d21f327":"60adfe72","chunk-2d2214b3":"210e725f","chunk-2d221799":"6c489432","chunk-2d221814":"067f6160","chunk-2d221a34":"887acc61","chunk-2d22502a":"64e24f70","chunk-2d226775":"e3191fd8","chunk-2d229411":"3de49429","chunk-2d2295e9":"a4a8f7b0","chunk-2d22c171":"f7bc8a8b","chunk-2d22c2b8":"468fcd61","chunk-2d22ca58":"b506ebfe","chunk-2d2311f7":"0515bb62","chunk-2d237ee7":"c369ccdd","chunk-7459c510":"c4a03664","chunk-7532b3ea":"c974f0b4","chunk-774d086f":"5f3bbffc","chunk-e13e4362":"4e177c19"}[t]+".js"}function o(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.e=function(t){var e=[],a={"chunk-0e1e8dcd":1,"chunk-18f53b40":1,"chunk-1d913ad0":1,"chunk-1c73bd66":1,"chunk-361ea255":1,"chunk-c7119f6e":1,"chunk-2572e239":1,"chunk-2cfa81ea":1,"chunk-410d3140":1,"chunk-48899312":1,"chunk-79c4e326":1};s[t]?e.push(s[t]):0!==s[t]&&a[t]&&e.push(s[t]=new Promise(function(e,a){for(var n="css/"+({}[t]||t)+"."+{"chunk-0e1e8dcd":"6003fdab","chunk-18f53b40":"76d8b490","chunk-1d913ad0":"d4b34fce","chunk-1c73bd66":"88bbc548","chunk-361ea255":"9b7471bf","chunk-c7119f6e":"a1cf96d6","chunk-2572e239":"62a12088","chunk-2cfa81ea":"bc801aa3","chunk-410d3140":"d7685423","chunk-48899312":"ff249e0d","chunk-79c4e326":"d02b1a88","chunk-0b65ffb6":"31d6cfe0","chunk-12950967":"31d6cfe0","chunk-2d0a3577":"31d6cfe0","chunk-2d0a43df":"31d6cfe0","chunk-2d0aa90c":"31d6cfe0","chunk-2d0aab07":"31d6cfe0","chunk-2d0abc00":"31d6cfe0","chunk-2d0ae937":"31d6cfe0","chunk-2d0aeb45":"31d6cfe0","chunk-2d0af08c":"31d6cfe0","chunk-2d0afa49":"31d6cfe0","chunk-2d0b6187":"31d6cfe0","chunk-2d0ba136":"31d6cfe0","chunk-2d0bb267":"31d6cfe0","chunk-2d0bcec1":"31d6cfe0","chunk-2d0bdf38":"31d6cfe0","chunk-2d0bff92":"31d6cfe0","chunk-2d0c0494":"31d6cfe0","chunk-2d0c0a09":"31d6cfe0","chunk-2d0c4313":"31d6cfe0","chunk-2d0c46d1":"31d6cfe0","chunk-2d0c512b":"31d6cfe0","chunk-2d0cf16e":"31d6cfe0","chunk-2d0d056d":"31d6cfe0","chunk-2d0d0645":"31d6cfe0","chunk-2d0d2f22":"31d6cfe0","chunk-2d0d61fd":"31d6cfe0","chunk-2d0d7e63":"31d6cfe0","chunk-2d0e1b57":"31d6cfe0","chunk-2d0e1fbe":"31d6cfe0","chunk-2d0e22d6":"31d6cfe0","chunk-2d0e542a":"31d6cfe0","chunk-2d0e57ec":"31d6cfe0","chunk-2d0e6553":"31d6cfe0","chunk-2d0e6c86":"31d6cfe0","chunk-2d0ea098":"31d6cfe0","chunk-2d0f0a11":"31d6cfe0","chunk-2d208ac5":"31d6cfe0","chunk-2d209408":"31d6cfe0","chunk-2d20f745":"31d6cfe0","chunk-2d20ff23":"31d6cfe0","chunk-2d2138c7":"31d6cfe0","chunk-2d216f3b":"31d6cfe0","chunk-2d217e5b":"31d6cfe0","chunk-2d21b84a":"31d6cfe0","chunk-2d21dcd2":"31d6cfe0","chunk-2d21f327":"31d6cfe0","chunk-2d2214b3":"31d6cfe0","chunk-2d221799":"31d6cfe0","chunk-2d221814":"31d6cfe0","chunk-2d221a34":"31d6cfe0","chunk-2d22502a":"31d6cfe0","chunk-2d226775":"31d6cfe0","chunk-2d229411":"31d6cfe0","chunk-2d2295e9":"31d6cfe0","chunk-2d22c171":"31d6cfe0","chunk-2d22c2b8":"31d6cfe0","chunk-2d22ca58":"31d6cfe0","chunk-2d2311f7":"31d6cfe0","chunk-2d237ee7":"31d6cfe0","chunk-7459c510":"31d6cfe0","chunk-7532b3ea":"31d6cfe0","chunk-774d086f":"31d6cfe0","chunk-e13e4362":"31d6cfe0"}[t]+".css",i=o.p+n,r=document.getElementsByTagName("link"),l=0;l<r.length;l++){var c=r[l],u=c.getAttribute("data-href")||c.getAttribute("href");if("stylesheet"===c.rel&&(u===n||u===i))return e()}var d=document.getElementsByTagName("style");for(l=0;l<d.length;l++){c=d[l],u=c.getAttribute("data-href");if(u===n||u===i)return e()}var p=document.createElement("link");p.rel="stylesheet",p.type="text/css",p.onload=e,p.onerror=function(e){var n=e&&e.target&&e.target.src||i,r=new Error("Loading CSS chunk "+t+" failed.\n("+n+")");r.code="CSS_CHUNK_LOAD_FAILED",r.request=n,delete s[t],p.parentNode.removeChild(p),a(r)},p.href=i;var f=document.getElementsByTagName("head")[0];f.appendChild(p)}).then(function(){s[t]=0}));var n=i[t];if(0!==n)if(n)e.push(n[2]);else{var r=new Promise(function(e,a){n=i[t]=[e,a]});e.push(n[2]=r);var c,u=document.createElement("script");u.charset="utf-8",u.timeout=120,o.nc&&u.setAttribute("nonce",o.nc),u.src=l(t),c=function(e){u.onerror=u.onload=null,clearTimeout(d);var a=i[t];if(0!==a){if(a){var n=e&&("load"===e.type?"missing":e.type),s=e&&e.target&&e.target.src,r=new Error("Loading chunk "+t+" failed.\n("+n+": "+s+")");r.type=n,r.request=s,a[1](r)}i[t]=void 0}};var d=setTimeout(function(){c({type:"timeout",target:u})},12e4);u.onerror=u.onload=c,document.head.appendChild(u)}return Promise.all(e)},o.m=t,o.c=n,o.d=function(t,e,a){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)o.d(a,n,function(e){return t[e]}.bind(null,n));return a},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/aurora/",o.oe=function(t){throw console.error(t),t};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],u=c.push.bind(c);c.push=e,c=c.slice();for(var d=0;d<c.length;d++)e(c[d]);var p=u;r.push(["05f3","chunk-vendors"]),a()})({0:function(t,e){},"03f9":function(t,e,a){"use strict";var n=a("ae30"),s=a.n(n);s.a},"057a":function(t){t.exports={color:["#91ca8c","#f49f42","#dd6b66","#eedd78","#73a373","#73b9bc","#7289ab","#759aa0","#e69d87","#8dc1a9","#ea7e53"],backgroundColor:"#313f69",textStyle:{},title:{textStyle:{color:"#eeeeee"},subtextStyle:{color:"#aaaaaa"}},line:{itemStyle:{normal:{borderWidth:1}},lineStyle:{normal:{width:2}},symbolSize:4,symbol:"circle",smooth:!1},radar:{itemStyle:{normal:{borderWidth:1}},lineStyle:{normal:{width:2}},symbolSize:4,symbol:"circle",smooth:!1},bar:{itemStyle:{normal:{barBorderWidth:0,barBorderColor:"#ccc"},emphasis:{barBorderWidth:0,barBorderColor:"#ccc"}}},pie:{itemStyle:{normal:{borderWidth:0,borderColor:"#ccc"},emphasis:{borderWidth:0,borderColor:"#ccc"}}},scatter:{itemStyle:{normal:{borderWidth:0,borderColor:"#ccc"},emphasis:{borderWidth:0,borderColor:"#ccc"}}},boxplot:{itemStyle:{normal:{borderWidth:0,borderColor:"#ccc"},emphasis:{borderWidth:0,borderColor:"#ccc"}}},parallel:{itemStyle:{normal:{borderWidth:0,borderColor:"#ccc"},emphasis:{borderWidth:0,borderColor:"#ccc"}}},sankey:{itemStyle:{normal:{borderWidth:0,borderColor:"#ccc"},emphasis:{borderWidth:0,borderColor:"#ccc"}}},funnel:{itemStyle:{normal:{borderWidth:0,borderColor:"#ccc"},emphasis:{borderWidth:0,borderColor:"#ccc"}}},gauge:{itemStyle:{normal:{borderWidth:0,borderColor:"#ccc"},emphasis:{borderWidth:0,borderColor:"#ccc"}}},candlestick:{itemStyle:{normal:{color:"#fd1050",color0:"#0cf49b",borderColor:"#fd1050",borderColor0:"#0cf49b",borderWidth:1}}},graph:{itemStyle:{normal:{borderWidth:0,borderColor:"#ccc"}},lineStyle:{normal:{width:1,color:"#aaaaaa"}},symbolSize:4,symbol:"circle",smooth:!1,color:["#dd6b66","#759aa0","#e69d87","#8dc1a9","#ea7e53","#eedd78","#73a373","#73b9bc","#7289ab","#91ca8c","#f49f42"],label:{normal:{textStyle:{color:"#eeeeee"}}}},map:{itemStyle:{normal:{areaColor:"#eeeeee",borderColor:"#444444",borderWidth:.5},emphasis:{areaColor:"rgba(255,215,0,0.8)",borderColor:"#444444",borderWidth:1}},label:{normal:{textStyle:{color:"#000000"}},emphasis:{textStyle:{color:"rgb(100,0,0)"}}}},geo:{itemStyle:{normal:{areaColor:"#eeeeee",borderColor:"#444444",borderWidth:.5},emphasis:{areaColor:"rgba(255,215,0,0.8)",borderColor:"#444444",borderWidth:1}},label:{normal:{textStyle:{color:"#000000"}},emphasis:{textStyle:{color:"rgb(100,0,0)"}}}},categoryAxis:{axisLine:{show:!0,lineStyle:{color:"#eeeeee"}},axisTick:{show:!0,lineStyle:{color:"#eeeeee"}},axisLabel:{show:!0,textStyle:{color:"#eeeeee"}},splitLine:{show:!0,lineStyle:{color:["#aaaaaa"]}},splitArea:{show:!1,areaStyle:{color:["#eeeeee"]}}},valueAxis:{axisLine:{show:!0,lineStyle:{color:"#eeeeee"}},axisTick:{show:!0,lineStyle:{color:"#eeeeee"}},axisLabel:{show:!0,textStyle:{color:"#eeeeee"}},splitLine:{show:!0,lineStyle:{color:["#aaaaaa"]}},splitArea:{show:!1,areaStyle:{color:["#eeeeee"]}}},logAxis:{axisLine:{show:!0,lineStyle:{color:"#eeeeee"}},axisTick:{show:!0,lineStyle:{color:"#eeeeee"}},axisLabel:{show:!0,textStyle:{color:"#eeeeee"}},splitLine:{show:!0,lineStyle:{color:["#aaaaaa"]}},splitArea:{show:!1,areaStyle:{color:["#eeeeee"]}}},timeAxis:{axisLine:{show:!0,lineStyle:{color:"#eeeeee"}},axisTick:{show:!0,lineStyle:{color:"#eeeeee"}},axisLabel:{show:!0,textStyle:{color:"#eeeeee"}},splitLine:{show:!0,lineStyle:{color:["#aaaaaa"]}},splitArea:{show:!1,areaStyle:{color:["#eeeeee"]}}},toolbox:{iconStyle:{normal:{borderColor:"#999999"},emphasis:{borderColor:"#666666"}}},legend:{textStyle:{color:"#eeeeee"}},tooltip:{axisPointer:{lineStyle:{color:"#eeeeee",width:"1"},crossStyle:{color:"#eeeeee",width:"1"}}},timeline:{lineStyle:{color:"#eeeeee",width:1},itemStyle:{normal:{color:"#dd6b66",borderWidth:1},emphasis:{color:"#a9334c"}},controlStyle:{normal:{color:"#eeeeee",borderColor:"#eeeeee",borderWidth:.5},emphasis:{color:"#eeeeee",borderColor:"#eeeeee",borderWidth:.5}},checkpointStyle:{color:"#e43c59",borderColor:"rgba(194,53,49,0.5)"},label:{normal:{textStyle:{color:"#eeeeee"}},emphasis:{textStyle:{color:"#eeeeee"}}}},visualMap:{color:["#bf444c","#d88273","#f6efa6"]},dataZoom:{backgroundColor:"rgba(47,69,84,0)",dataBackgroundColor:"rgba(255,255,255,0.3)",fillerColor:"rgba(167,183,204,0.4)",handleColor:"#a7b7cc",handleSize:"100%",textStyle:{color:"#eeeeee"}},markPoint:{label:{normal:{textStyle:{color:"#eeeeee"}},emphasis:{textStyle:{color:"#eeeeee"}}}}}},"05f3":function(t,e,a){"use strict";a.r(e);a("96cf");var n=a("3b8d"),s=(a("cadf"),a("551c"),a("f751"),a("097d"),a("2b0e")),i=a("5c96"),r=a.n(i),l=a("f0d9"),o=a.n(l),c=(a("0fae"),a("c774"),function(t,e){var a=window,n=a._actions;t&&n&&-1===n.indexOf(e.value)&&(t.style.display="none")}),u={bind:c,inserted:c,update:c},d=a("428d"),p=a.n(d),f=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("router-view")],1)},m=[],h={name:"App"},b=h,y=(a("6264"),a("2877")),v=Object(y["a"])(b,f,m,!1,null,null,null),g=v.exports,x=(a("ac6a"),a("8c4f")),k=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"layout"},[a("Navbar"),a("AppMain")],1)},C=[],w=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("header",{staticClass:"navbar"},[a("div",{staticClass:"leftIcon"},[a("router-link",{attrs:{to:{name:"首页"}}},[t._v("Aurora")])],1),a("div",{staticClass:"centerMenu"},[a("Menu")],1),a("el-dropdown",{staticClass:"rightLogin"},[a("div",{staticClass:"avatar-wrapper"},[t._v("\n      "+t._s(t.userName||"未登录")+"\n      ")]),a("el-dropdown-menu",{staticClass:"user-dropdown",attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",[a("span",{on:{click:t.logout}},[t._v("退出登录")])])],1)],1)],1)},S=[],_=a("1211"),T=a.n(_),$=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ul",{staticClass:"navMenu"},t._l(t.menuList,function(e,n){return a("li",{key:n},[a("router-link",{attrs:{to:{name:e.name}}},[t._v(t._s(e.name))])],1)}),0)},L=[],j=(a("7f7f"),{computed:{menuList:function(){return Y[0].children.filter(function(t){return t.name})}}}),O=j,D=(a("b08f"),Object(y["a"])(O,$,L,!1,null,"76f26eca",null)),E=D.exports,A={components:{Menu:E},computed:{userName:function(){return T.a.userInfo.realName}},methods:{logout:function(){T.a.signOut()}}},N=A,I=(a("bd9a"),Object(y["a"])(N,w,S,!1,null,"7d7eb046",null)),P=I.exports,M=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"app-main"},[a("transition",{attrs:{name:"fade",mode:"out-in"}},[a("router-view")],1)],1)},V=[],W={name:"AppMain"},B=W,q=(a("3157"),Object(y["a"])(B,M,V,!1,null,"17a227f7",null)),F=q.exports,z={name:"Layout",components:{Navbar:P,AppMain:F}},U=z,X=(a("ed5a"),Object(y["a"])(U,k,C,!1,null,"82665754",null)),H=X.exports,Y=[{path:"/",component:H,redirect:"/aurora-edit/1/sql/测试数据源",children:[{name:"首页",path:"index",component:function(){return a.e("chunk-48899312").then(a.bind(null,"37f9"))}},{name:"创作空间",path:"createSpace",component:function(){return a.e("chunk-18f53b40").then(a.bind(null,"f5b3"))},children:[{name:"createSpaceIndex",path:"index/:projectId/:parentId/:breadList",props:function(t){return t.params.breadList?{breadList:JSON.parse(t.params.breadList),projectId:t.params.projectId||"-1",parentId:t.params.parentId||"-1"}:{}},component:function(){return a.e("chunk-79c4e326").then(a.bind(null,"843f"))}},{name:"createSpaceES",path:"es",component:function(){return Promise.all([a.e("chunk-1d913ad0"),a.e("chunk-361ea255")]).then(a.bind(null,"b1e8"))}},{name:"createSpaceSQL",path:"sql",component:function(){return Promise.all([a.e("chunk-1d913ad0"),a.e("chunk-1c73bd66")]).then(a.bind(null,"76a3"))}},{name:"createSpaceAsset",path:"asset",component:function(){return Promise.all([a.e("chunk-1d913ad0"),a.e("chunk-c7119f6e")]).then(a.bind(null,"21d4"))}}]}]},{name:"panel",path:"/aurora/:projectId/:parentId/:id/:state/:breadList",component:function(){return a.e("chunk-2572e239").then(a.bind(null,"1afa"))},props:function(t){return t.params.breadList?{breadList:JSON.parse(t.params.breadList),projectId:t.params.projectId||"-1",parentId:t.params.parentId||"-1",id:t.params.id,state:t.params.state}:{}},children:[]},{name:"panelWeb",path:"/aurora/view/:id",component:function(){return a.e("chunk-410d3140").then(a.bind(null,"464b"))},props:function(t){return{id:t.params.id}}},{name:"selfWeb",path:"/auroraSelfview/:dataSetId/:dataSetType/:dataSetName",component:function(){return a.e("chunk-0e1e8dcd").then(a.bind(null,"0d0a"))},props:function(t){return{dataSetId:t.params.dataSetId,dataSetType:t.params.dataSetType}}},{name:"panelEdit",path:"/aurora-edit/:dataSetId/:dataSetType/:dataSetName",component:function(){return a.e("chunk-2cfa81ea").then(a.bind(null,"8f04"))}}];s["default"].use(x["a"]);var Q=new x["a"]({scrollBehavior:function(){return{y:0}},routes:Y});Q.beforeEach(function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(e,a,n){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:window.cancelTokenList&&window.cancelTokenList.forEach(function(t){return t.cancel()}),window.cancelTokenList=[],n();case 3:case"end":return t.stop()}},t)}));return function(e,a,n){return t.apply(this,arguments)}}());var R=Q,J=a("2f62"),G=a("27cc"),Z={state:{colNum:24,rowHeight:10,searchComps:{Select:!0,Date:!0},compList:[],labelMap:{},theme:"default",preView:!1,activeComp:{},datasetList:null},mutations:{changeActiveComp:function(t,e){t.preView||(t.activeComp=e)},addComp:function(t,e){if("Search"!==e.type||"Search"!==e.compType)if(t.searchComps[e.type]&&"Search"!==e.compType)e.vm.$message({type:"warning",message:"".concat(e.type," 组件只能拖入查询组件中")});else if(t.searchComps[e.type]||"Search"!==e.compType){var a=(new Date).getTime();t.activeComp=Object(G["c"])(e,a,t),"Search"===e.type?e.list.push(t.activeComp):e.list.unshift(t.activeComp)}else e.vm.$message({type:"warning",message:"".concat(e.type," 组件不能拖入查询组件中")});else e.vm.$message({type:"warning",message:"".concat(e.type," 查询组件不能拖入查询组件中")})},switchComp:function(t,e){var a=t.activeComp,n=a.x,s=a.y,i=a.w,r=a.h,l=Object(G["c"])({type:e,x:n,y:s},(new Date).getTime(),t);Object.assign(l,{w:i,h:r}),Object(G["e"])(t,l),t.activeComp=l},setCompList:function(t,e){var a=e.labelMap,n=e.compList,s=e.theme;t.compList=n,t.labelMap=a,t.theme=s||"default"},initState:function(t){t.preView=!1,t.compList=[],t.activeComp={},t.labelMap={},t.theme="default",t.datasetList=null}}},K=Z;s["default"].use(J["a"]);var tt=new J["a"].Store({modules:{panel:K}}),et=tt,at=a("12f5");at.keys().forEach(function(t){var e=at(t).default;s["default"].component(e.name,e)});var nt=a("313e"),st=a.n(nt),it=a("0efa"),rt=a("057a");a("fdff");st.a.registerTheme("default",it),st.a.registerTheme("dark",rt),s["default"].use(r.a,{locale:o.a,size:"mini"}),s["default"].directive("resize",p.a),s["default"].directive("action",u),s["default"].config.productionTip=!1;var lt=function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:window._actions=["ALL"],new s["default"]({el:"#app",router:R,store:et,render:function(t){return t(g)}});case 2:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}();lt()},"06a7":function(t,e,a){"use strict";var n=a("c21a"),s=a.n(n);s.a},"0c0e":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tab-container"},[a("div",{staticClass:"header"},[a("div",{staticClass:"title"},[t._v(t._s(t.data.styles.label.text))]),t.showSwitch?a("div",{staticClass:"rightSelect"},[a("el-popover",{attrs:{placement:"bottom",width:"350","popper-class":"compSwitch","visible-arrow":!1,trigger:"click"},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[a("compSwitch",{attrs:{data:t.data}}),a("span",{staticClass:"title",attrs:{slot:"reference"},slot:"reference"},[t._v("更改图表类型"),a("i",{class:"el-icon-caret-"+(t.show?"bottom":"top")})])],1)],1):t._e()]),a("el-tabs",{attrs:{type:"border-card"}},[t._t("default")],2)],1)},s=[],i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"compSwitch"},t._l(t.compList,function(e){return a("div",{key:e.name,staticClass:"compItem"},[t.$store.state.panel.searchComps[e.icon]?t._e():[a("div",{staticClass:"title"},[t._v(t._s(e.name))]),a("div",{staticClass:"panel"},[a("div",{staticClass:"panelItem",class:{active:t.active===e.icon},on:{click:function(a){return t.clickItem(e)}}},[a("i",{class:"iconfont icon-"+e.icon})]),e.children?t._l(e.children,function(e){return a("div",{key:e.icon,staticClass:"panelItem",class:{active:t.active===e.icon},on:{click:function(a){return t.clickItem(e)}}},[a("i",{class:"iconfont icon-"+e.icon})])}):t._e()],2)]],2)}),0)},r=[],l=a("27cc"),o={props:{data:{type:Object,default:function(){return{}}}},data:function(){return{active:this.data.type}},created:function(){this.compList=l["a"]},methods:{clickItem:function(t){this.active=t.icon,this.$store.commit("switchComp",this.active)}}},c=o,u=(a("4b59"),a("2877")),d=Object(u["a"])(c,i,r,!1,null,"6533ddb0",null),p=d.exports,f={components:{compSwitch:p},props:{data:{type:Object,default:function(){return{}}}},data:function(){return{show:!1}},computed:{showSwitch:function(){for(var t=0,e=l["a"].length;t<e;t+=1)if(l["a"][t].icon===this.data.type&&!this.$store.state.panel.searchComps[this.data.type])return!0;return!1}}},m=f,h=(a("d5b3"),Object(u["a"])(m,n,s,!1,null,"079585ef",null));e["a"]=h.exports},"0dfd":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:["compInfo"]},[a("el-form",{attrs:{"label-position":"right","label-width":"130px"}},[a("div",{staticClass:"title"},[t._v("基础信息")]),a("el-form",{attrs:{"label-width":"50px"}},[[a("el-form-item",{attrs:{label:"标题"}},[a("el-input",{attrs:{placeholder:"请输入标题"},model:{value:t.styles.label.text,callback:function(e){t.$set(t.styles.label,"text",e)},expression:"styles.label.text"}})],1),a("el-form-item",{attrs:{label:"备注"}},[a("el-input",{attrs:{placeholder:"请输入备注"},model:{value:t.styles.label.subText,callback:function(e){t.$set(t.styles.label,"subText",e)},expression:"styles.label.subText"}})],1)]],2),a("div",{staticClass:"title"},[t._v("图表样式")]),a("el-form-item",{attrs:{label:"显示图表图例"}},[a("el-switch",{attrs:{"active-color":"#409EFF","inactive-color":"#eee"},model:{value:t.styles.legend.show,callback:function(e){t.$set(t.styles.legend,"show",e)},expression:"styles.legend.show"}}),t.styles.legend.show?[a("label",{staticClass:"position"},[t._v("位置")]),a("el-select",{style:{width:"68px"},attrs:{"popper-append-to-body":!1},model:{value:t.styles.legend.top,callback:function(e){t.$set(t.styles.legend,"top",e)},expression:"styles.legend.top"}},[a("el-option",{attrs:{label:"上",value:"top"}}),a("el-option",{attrs:{label:"中",value:"middle"}}),a("el-option",{attrs:{label:"下",value:"bottom"}})],1)]:t._e()],2),a("el-form-item",{attrs:{label:"显示图表数据标签"}},[a("el-switch",{attrs:{"active-color":"#409EFF","inactive-color":"#eee"},model:{value:t.styles.labelNormal.show,callback:function(e){t.$set(t.styles.labelNormal,"show",e)},expression:"styles.labelNormal.show"}}),t.styles.labelNormal.show?[a("label",{staticClass:"position"},[t._v("位置")]),a("el-select",{style:{width:"68px"},attrs:{"popper-append-to-body":!1},model:{value:t.styles.labelNormal.position,callback:function(e){t.$set(t.styles.labelNormal,"position",e)},expression:"styles.labelNormal.position"}},[a("el-option",{attrs:{label:"上",value:"top"}}),a("el-option",{attrs:{label:"下",value:"bottom"}}),a("el-option",{attrs:{label:"左",value:"left"}}),a("el-option",{attrs:{label:"右",value:"right"}}),a("el-option",{attrs:{label:"内嵌",value:"inside"}})],1)]:t._e()],2),"Line"===t.data.type?[a("el-form-item",{attrs:{label:"线条样式"}},[a("el-radio",{attrs:{label:!1},model:{value:t.styles.lineParams.smooth,callback:function(e){t.$set(t.styles.lineParams,"smooth",e)},expression:"styles.lineParams.smooth"}},[t._v("折线")]),a("el-radio",{attrs:{label:!0},model:{value:t.styles.lineParams.smooth,callback:function(e){t.$set(t.styles.lineParams,"smooth",e)},expression:"styles.lineParams.smooth"}},[t._v("曲线")])],1),a("el-form-item",{attrs:{label:"区域填充类型"}},[a("el-radio",{attrs:{label:null},model:{value:t.styles.lineParams.areaStyle,callback:function(e){t.$set(t.styles.lineParams,"areaStyle",e)},expression:"styles.lineParams.areaStyle"}},[t._v("不填充")]),a("el-radio",{attrs:{label:!0},model:{value:t.styles.lineParams.areaStyle,callback:function(e){t.$set(t.styles.lineParams,"areaStyle",e)},expression:"styles.lineParams.areaStyle"}},[t._v("填充")])],1),a("el-form-item",{attrs:{label:"堆积类型"}},[a("el-radio",{attrs:{label:null},model:{value:t.styles.lineParams.stack,callback:function(e){t.$set(t.styles.lineParams,"stack",e)},expression:"styles.lineParams.stack"}},[t._v("不堆积")]),a("el-radio",{attrs:{label:"总量"},model:{value:t.styles.lineParams.stack,callback:function(e){t.$set(t.styles.lineParams,"stack",e)},expression:"styles.lineParams.stack"}},[t._v("堆积")])],1)]:t._e(),"Bar"===t.data.type?[a("el-form-item",{attrs:{label:"图表方向"}},[a("el-radio",{attrs:{label:!1},model:{value:t.styles.barParams.vertical,callback:function(e){t.$set(t.styles.barParams,"vertical",e)},expression:"styles.barParams.vertical"}},[t._v("水平")]),a("el-radio",{attrs:{label:!0},model:{value:t.styles.barParams.vertical,callback:function(e){t.$set(t.styles.barParams,"vertical",e)},expression:"styles.barParams.vertical"}},[t._v("垂直")])],1),a("el-form-item",{attrs:{label:"堆积类型"}},[a("el-radio",{attrs:{label:null},model:{value:t.styles.barParams.stack,callback:function(e){t.$set(t.styles.barParams,"stack",e)},expression:"styles.barParams.stack"}},[t._v("不堆积")]),a("el-radio",{attrs:{label:"总量"},model:{value:t.styles.barParams.stack,callback:function(e){t.$set(t.styles.barParams,"stack",e)},expression:"styles.barParams.stack"}},[t._v("堆积")])],1)]:t._e(),"Line"===t.data.type||"Bar"===t.data.type||"Comb"===t.data.type?[a("div",{staticClass:"title"},[t._v("坐标轴")]),a("ul",{staticClass:"axis"},[a("li",{class:{active:"x"===t.axisType},on:{click:function(e){t.axisType="x"}}},[t._v(t._s(t.axisName.x))]),a("li",{class:{active:"y"===t.axisType},on:{click:function(e){t.axisType="y"}}},[t._v(t._s(t.axisName.y))]),t.styles.xAxis[0].select.length<2?a("li",{class:{active:"yy"===t.axisType},on:{click:function(e){t.axisType="yy"}}},[t._v(t._s(t.axisName.yy))]):t._e()]),a("el-form",{attrs:{"label-width":"105px"}},[a("br"),a("el-form-item",{attrs:{label:"显示轴"}},[a("el-switch",{attrs:{"active-color":"#409EFF","inactive-color":"#eee"},model:{value:t.styles[t.axis.type][t.axis.index].show,callback:function(e){t.$set(t.styles[t.axis.type][t.axis.index],"show",e)},expression:"styles[axis.type][axis.index].show"}})],1),"Comb"===t.data.type?["y"===t.axisType?[a("el-form-item",{attrs:{label:"堆积类型"}},[a("el-radio",{attrs:{label:null},model:{value:t.styles.barParams.stack,callback:function(e){t.$set(t.styles.barParams,"stack",e)},expression:"styles.barParams.stack"}},[t._v("不堆积")]),a("el-radio",{attrs:{label:"总量"},model:{value:t.styles.barParams.stack,callback:function(e){t.$set(t.styles.barParams,"stack",e)},expression:"styles.barParams.stack"}},[t._v("堆积")])],1)]:t._e(),"yy"===t.axisType?[a("el-form-item",{attrs:{label:"线条样式"}},[a("el-radio",{attrs:{label:!1},model:{value:t.styles.lineParams.smooth,callback:function(e){t.$set(t.styles.lineParams,"smooth",e)},expression:"styles.lineParams.smooth"}},[t._v("折线")]),a("el-radio",{attrs:{label:!0},model:{value:t.styles.lineParams.smooth,callback:function(e){t.$set(t.styles.lineParams,"smooth",e)},expression:"styles.lineParams.smooth"}},[t._v("曲线")])],1)]:t._e()]:t._e(),[a("el-form-item",{attrs:{label:"名称"}},[a("el-input",{attrs:{placeholder:"请输入轴名称"},model:{value:t.styles[t.axis.type][t.axis.index].name,callback:function(e){t.$set(t.styles[t.axis.type][t.axis.index],"name",e)},expression:"styles[axis.type][axis.index].name"}})],1),a("el-form-item",{attrs:{label:t.axis.name+"选择"}},[a("el-select",{attrs:{multiple:"",placeholder:"请选择"+t.axis.name,"multiple-limit":t.axis.limit,"collapse-tags":!0,"popper-append-to-body":!1,"value-key":"label"},model:{value:t.styles[t.axis.type][t.axis.index].select,callback:function(e){t.$set(t.styles[t.axis.type][t.axis.index],"select",e)},expression:"styles[axis.type][axis.index].select"}},t._l(t.metricsFilter,function(t,e){return a("el-option",{key:e,attrs:{label:t.label,value:t}})}),1)],1),a("el-form-item",{attrs:{label:"显示网格线"}},[a("el-switch",{attrs:{"active-color":"#409EFF","inactive-color":"#eee"},model:{value:t.styles[t.axis.type][t.axis.index].splitLine.show,callback:function(e){t.$set(t.styles[t.axis.type][t.axis.index].splitLine,"show",e)},expression:"styles[axis.type][axis.index].splitLine.show"}})],1),a("el-form-item",{attrs:{label:"显示刻度线"}},[a("el-switch",{attrs:{"active-color":"#409EFF","inactive-color":"#eee"},model:{value:t.styles[t.axis.type][t.axis.index].axisLabel.show,callback:function(e){t.$set(t.styles[t.axis.type][t.axis.index].axisLabel,"show",e)},expression:"styles[axis.type][axis.index].axisLabel.show"}})],1)]],2)]:t._e()],2)],1)},s=[],i={props:{data:{type:Object,default:function(){return{}}}},data:function(){return{axisType:"x",styles:{}}},computed:{axisName:function(){var t={x:"水平X轴",y:"左侧Y轴",yy:"右侧Y轴"};return"Bar"!==this.data.type||this.styles.barParams.vertical||(t.x="左侧Y轴",t.y="下侧X轴",t.yy="上侧X轴"),"Comb"===this.data.type&&(t.y="左侧Y轴(柱)",t.yy="右侧Y轴(折)"),t},axis:function(){var t=0;if("x"===this.axisType){var e=this.styles.yAxis[0].select.length+this.styles.yAxis[1].select.length;return t=e>1?1:2,{name:"维度",type:"xAxis",limit:t,index:0}}return this.styles.xAxis[0].select.length>1&&(t=1),"y"===this.axisType?{name:"度量",type:"yAxis",limit:t,index:0}:{name:"度量",type:"yAxis",limit:t,index:1}},metricsFilter:function(){if(!this.data.params.dimensions)return[];var t=[];if("x"===this.axisType)t=this.data.params.dimensions;else{var e=this.styles.yAxis["y"===this.axisType?1:0].select;t=this.data.params.metrics.filter(function(t){for(var a=!0,n=0,s=e.length;n<s;n+=1)if(e[n].label===t.label){a=!1;break}return a})}return t}},created:function(){this.styles=this.data.styles}},r=i,l=(a("b38e"),a("2877")),o=Object(l["a"])(r,n,s,!1,null,"a734e770",null);e["a"]=o.exports},"0e52":function(t,e,a){"use strict";var n=a("c6f7"),s=a.n(n);s.a},"0efa":function(t){t.exports={color:["#3fb1e3","#6be6c1","#626c91","#a0a7e6","#c4ebad","#96dee8"],backgroundColor:"rgba(252,252,252,0)",textStyle:{},title:{textStyle:{color:"#666666"},subtextStyle:{color:"#999999"}},line:{itemStyle:{normal:{borderWidth:"2"}},lineStyle:{normal:{width:"3"}},symbolSize:"8",symbol:"emptyCircle",smooth:!1},radar:{itemStyle:{normal:{borderWidth:"2"}},lineStyle:{normal:{width:"3"}},symbolSize:"8",symbol:"emptyCircle",smooth:!1},bar:{itemStyle:{normal:{barBorderWidth:0,barBorderColor:"#ccc"},emphasis:{barBorderWidth:0,barBorderColor:"#ccc"}}},pie:{itemStyle:{normal:{borderWidth:0,borderColor:"#ccc"},emphasis:{borderWidth:0,borderColor:"#ccc"}}},scatter:{itemStyle:{normal:{borderWidth:0,borderColor:"#ccc"},emphasis:{borderWidth:0,borderColor:"#ccc"}}},boxplot:{itemStyle:{normal:{borderWidth:0,borderColor:"#ccc"},emphasis:{borderWidth:0,borderColor:"#ccc"}}},parallel:{itemStyle:{normal:{borderWidth:0,borderColor:"#ccc"},emphasis:{borderWidth:0,borderColor:"#ccc"}}},sankey:{itemStyle:{normal:{borderWidth:0,borderColor:"#ccc"},emphasis:{borderWidth:0,borderColor:"#ccc"}}},funnel:{itemStyle:{normal:{borderWidth:0,borderColor:"#ccc"},emphasis:{borderWidth:0,borderColor:"#ccc"}}},gauge:{itemStyle:{normal:{borderWidth:0,borderColor:"#ccc"},emphasis:{borderWidth:0,borderColor:"#ccc"}}},candlestick:{itemStyle:{normal:{color:"#e6a0d2",color0:"transparent",borderColor:"#e6a0d2",borderColor0:"#3fb1e3",borderWidth:"2"}}},graph:{itemStyle:{normal:{borderWidth:0,borderColor:"#ccc"}},lineStyle:{normal:{width:"1",color:"#cccccc"}},symbolSize:"8",symbol:"emptyCircle",smooth:!1,color:["#3fb1e3","#6be6c1","#626c91","#a0a7e6","#c4ebad","#96dee8"],label:{normal:{textStyle:{color:"#ffffff"}}}},map:{itemStyle:{normal:{areaColor:"#eeeeee",borderColor:"#aaaaaa",borderWidth:.5},emphasis:{areaColor:"rgba(63,177,227,0.25)",borderColor:"#3fb1e3",borderWidth:1}},label:{normal:{textStyle:{color:"#ffffff"}},emphasis:{textStyle:{color:"rgb(63,177,227)"}}}},geo:{itemStyle:{normal:{areaColor:"#eeeeee",borderColor:"#aaaaaa",borderWidth:.5},emphasis:{areaColor:"rgba(63,177,227,0.25)",borderColor:"#3fb1e3",borderWidth:1}},label:{normal:{textStyle:{color:"#ffffff"}},emphasis:{textStyle:{color:"rgb(63,177,227)"}}}},categoryAxis:{axisLine:{show:!0,lineStyle:{color:"#cccccc"}},axisTick:{show:!1,lineStyle:{color:"#333"}},axisLabel:{show:!0,textStyle:{color:"#999999"}},splitLine:{show:!0,lineStyle:{color:["#eeeeee"]}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.05)","rgba(200,200,200,0.02)"]}}},valueAxis:{axisLine:{show:!0,lineStyle:{color:"#cccccc"}},axisTick:{show:!1,lineStyle:{color:"#333"}},axisLabel:{show:!0,textStyle:{color:"#999999"}},splitLine:{show:!0,lineStyle:{color:["#eeeeee"]}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.05)","rgba(200,200,200,0.02)"]}}},logAxis:{axisLine:{show:!0,lineStyle:{color:"#cccccc"}},axisTick:{show:!1,lineStyle:{color:"#333"}},axisLabel:{show:!0,textStyle:{color:"#999999"}},splitLine:{show:!0,lineStyle:{color:["#eeeeee"]}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.05)","rgba(200,200,200,0.02)"]}}},timeAxis:{axisLine:{show:!0,lineStyle:{color:"#cccccc"}},axisTick:{show:!1,lineStyle:{color:"#333"}},axisLabel:{show:!0,textStyle:{color:"#999999"}},splitLine:{show:!0,lineStyle:{color:["#eeeeee"]}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.05)","rgba(200,200,200,0.02)"]}}},toolbox:{iconStyle:{normal:{borderColor:"#999999"},emphasis:{borderColor:"#666666"}}},legend:{textStyle:{color:"#999999"}},tooltip:{axisPointer:{lineStyle:{color:"#cccccc",width:1},crossStyle:{color:"#cccccc",width:1}}},timeline:{lineStyle:{color:"#626c91",width:1},itemStyle:{normal:{color:"#626c91",borderWidth:1},emphasis:{color:"#626c91"}},controlStyle:{normal:{color:"#626c91",borderColor:"#626c91",borderWidth:.5},emphasis:{color:"#626c91",borderColor:"#626c91",borderWidth:.5}},checkpointStyle:{color:"#3fb1e3",borderColor:"rgba(63,177,227,0.15)"},label:{normal:{textStyle:{color:"#626c91"}},emphasis:{textStyle:{color:"#626c91"}}}},visualMap:{color:["#2a99c9","#afe8ff"]},dataZoom:{backgroundColor:"rgba(255,255,255,0)",dataBackgroundColor:"rgba(222,222,222,1)",fillerColor:"rgba(114,230,212,0.25)",handleColor:"#cccccc",handleSize:"100%",textStyle:{color:"#999999"}},markPoint:{label:{normal:{textStyle:{color:"#ffffff"}},emphasis:{textStyle:{color:"#ffffff"}}}}}},1:function(t,e){},"106f":function(t,e,a){"use strict";var n=a("1736"),s=a.n(n);s.a},"11ce":function(t,e,a){},1202:function(t,e,a){},"129e":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"config"},[a("tabContainer",{attrs:{data:t.data}},[a("el-tab-pane",{attrs:{label:"数据"}},[a("dataContainer",{attrs:{data:t.data}},[a("chartContainer",{attrs:{data:t.data}})],1)],1),a("el-tab-pane",{attrs:{label:"显示"}},[a("el-form",{attrs:{"label-position":"right","label-width":"130px"}},[a("div",{staticClass:"title"},[t._v("基础信息")]),a("el-form",{attrs:{"label-width":"50px"}},[[a("el-form-item",{attrs:{label:"标题"}},[a("el-input",{attrs:{placeholder:"请输入标题"},model:{value:t.styles.label.text,callback:function(e){t.$set(t.styles.label,"text",e)},expression:"styles.label.text"}})],1),a("el-form-item",{attrs:{label:"备注"}},[a("el-input",{attrs:{placeholder:"请输入备注"},model:{value:t.styles.label.subText,callback:function(e){t.$set(t.styles.label,"subText",e)},expression:"styles.label.subText"}})],1)]],2),a("div",{staticClass:"title"},[t._v("图表样式")]),a("el-form-item",{attrs:{label:"显示图表图例"}},[a("el-switch",{attrs:{"active-color":"#409EFF","inactive-color":"#eee"},model:{value:t.styles.legend.show,callback:function(e){t.$set(t.styles.legend,"show",e)},expression:"styles.legend.show"}}),t.styles.legend.show?[a("label",{staticClass:"position"},[t._v("位置")]),a("el-select",{style:{width:"68px"},attrs:{"popper-append-to-body":!1},model:{value:t.styles.legend.top,callback:function(e){t.$set(t.styles.legend,"top",e)},expression:"styles.legend.top"}},[a("el-option",{attrs:{label:"上",value:"top"}}),a("el-option",{attrs:{label:"中",value:"middle"}}),a("el-option",{attrs:{label:"下",value:"bottom"}})],1)]:t._e()],2),a("el-form-item",{attrs:{label:"显示图表数据标签"}},[a("el-switch",{attrs:{"active-color":"#409EFF","inactive-color":"#eee"},model:{value:t.styles.labelNormal.show,callback:function(e){t.$set(t.styles.labelNormal,"show",e)},expression:"styles.labelNormal.show"}}),t.styles.labelNormal.show?[a("label",{staticClass:"position"},[t._v("位置")]),a("el-select",{style:{width:"68px"},attrs:{"popper-append-to-body":!1},model:{value:t.styles.labelNormal.position,callback:function(e){t.$set(t.styles.labelNormal,"position",e)},expression:"styles.labelNormal.position"}},[a("el-option",{attrs:{label:"左",value:"left"}}),a("el-option",{attrs:{label:"内部",value:"inside"}}),a("el-option",{attrs:{label:"右",value:"right"}})],1)]:t._e()],2)],1)],1)],1)],1)},s=[],i=a("0c0e"),r=a("29c3"),l=a("db77"),o={name:"LouConfig",components:{tabContainer:i["a"],dataContainer:r["a"],chartContainer:l["a"]},props:{data:{type:Object,default:function(){return{}}}},data:function(){return{styles:this.data.styles}}},c=o,u=(a("d620"),a("2877")),d=Object(u["a"])(c,n,s,!1,null,"27780e17",null);e["default"]=d.exports},"12f5":function(t,e,a){var n={"./Label/config.vue":"8e81","./Label/index.vue":"c2d3","./bar/config.vue":"1c10","./bar/index.vue":"3909","./comb/config.vue":"8eb1","./comb/index.vue":"187b","./date/config.vue":"7736","./date/index.vue":"8e16","./line/config.vue":"20a7","./line/index.vue":"9553","./lou/config.vue":"129e","./lou/index.vue":"fd69","./pie/config.vue":"2d38","./pie/index.vue":"6961","./search/config.vue":"4d14","./search/index.vue":"5006","./select/config.vue":"7eba","./select/index.vue":"a133","./tab/config.vue":"4eee","./tab/index.vue":"c67e","./table/config.vue":"6af0","./table/index.vue":"ddc6"};function s(t){var e=i(t);return a(e)}function i(t){var e=n[t];if(!(e+1)){var a=new Error("Cannot find module '"+t+"'");throw a.code="MODULE_NOT_FOUND",a}return e}s.keys=function(){return Object.keys(n)},s.resolve=i,t.exports=s,s.id="12f5"},"16e7":function(t,e,a){"use strict";var n=a("dde4"),s=a.n(n);s.a},1736:function(t,e,a){},"187b":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Chart",{attrs:{data:t.data},on:{apply:t.applyChart}},[t._t("default")],2)},s=[],i=(a("6762"),a("2fdb"),a("7514"),a("7f7f"),a("ac6a"),a("e61b")),r=a("ed08"),l={name:"CombComp",components:{Chart:i["a"]},props:{data:{type:Object,default:function(){return{}}}},methods:{applyChart:function(t){var e=t.res,a=t.chartData,n=t.myChart;this.exportData=e;var s=e.result;this.myChart=n;var i=a.styles,l=i.xAxis,o=i.yAxis,c=i.legend,u=i.labelNormal,d=i.lineParams,p=i.barParams;i.tooltip.formatter=function(t){var e=[];if(t.forEach(function(t){var n=t.seriesName,s=t.value,i=t.name,r=t.marker,l=a.params.metrics.find(function(t){return t.label===n}),o=l.formatThousand,c=l.formatType,u=l.formatNum;e.push({seriesName:n,value:s,name:i,marker:r,formatThousand:o,formatType:c,formatNum:u})}),0===e.length)return null;var n="".concat(e[0].name,"<br/>");return e.forEach(function(t){var e=t.seriesName,a=t.value,s=t.marker,i=t.formatThousand,l=t.formatType,o=t.formatNum,c=("percent"===l?100*a:a).toFixed(o);c=i?Object(r["a"])(c):c,c="percent"===l?"".concat(c,"%"):c,n+="".concat(s+e,": ").concat(c,"<br/>")}),n};var f=d.smooth,m=d.areaStyle,h=d.stack,b=p.stack,y=null,v=null,g={},x=[];l[0].select.forEach(function(t,e){0===e?y=t.column:v=t.column}),[0,1].forEach(function(t){o[t].select.forEach(function(e){x.push({yAxisIndex:t,label:e.label,column:e.aggregate?"".concat(e.aggregate.toUpperCase(),"(").concat(e.column,")"):e.column||e.expression})})}),l[0].data=[],c.data=[];var k={};i.series=[],s.forEach(function(t){t[y]&&!l[0].data.includes(t[y])&&l[0].data.push(t[y]),g[t[y]]=g[t[y]]||{};var e=g[t[y]];x.forEach(function(a){var n=(v?"".concat(t[v],"-"):"")+a.label;e[n]=t[a.column];var s={name:n,yAxisIndex:a.yAxisIndex};k[n]||(k[n]=!0,c.data.push(s))})}),c.data.forEach(function(t){var e=t.name,n=t.yAxisIndex,s=[];l[0].data.forEach(function(t){s.push(g[t][e])});var o={name:e,yAxisIndex:n,label:{normal:Object.assign(u,{formatter:function(t){var e=t.seriesName,n=t.value,s=a.params.metrics.find(function(t){return t.label===e}),i=s.formatThousand,l=s.formatType,o=s.formatNum,c=("percent"===l?100*n:n).toFixed(o);return c=i?Object(r["a"])(c):c,c="percent"===l?"".concat(c,"%"):c,c}})},data:s};0===n?i.series.push(Object.assign(o,{type:"bar",stack:b})):1===n&&i.series.push(Object.assign(o,{type:"line",stack:h,smooth:f,areaStyle:m}))}),this.myChart.resize(),this.myChart.setOption(i,!0)},resize:function(){this.myChart&&this.myChart.resize()}}},o=l,c=a("2877"),u=Object(c["a"])(o,n,s,!1,null,null,null);e["default"]=u.exports},"1c10":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"config"},[a("tabContainer",{attrs:{data:t.data}},[a("el-tab-pane",{attrs:{label:"数据"}},[a("dataContainer",{attrs:{data:t.data}},[a("chartContainer",{attrs:{data:t.data}})],1)],1),a("el-tab-pane",{attrs:{label:"显示"}},[a("showContainer",{attrs:{data:t.data}})],1)],1)],1)},s=[],i=a("0c0e"),r=a("29c3"),l=a("0dfd"),o=a("db77"),c={name:"BarConfig",components:{tabContainer:i["a"],dataContainer:r["a"],chartContainer:o["a"],showContainer:l["a"]},props:{data:{type:Object,default:function(){return{}}}}},u=c,d=(a("ef01"),a("2877")),p=Object(d["a"])(u,n,s,!1,null,"1458f758",null);e["default"]=p.exports},2:function(t,e){},2056:function(t,e,a){"use strict";var n={dev:{SPACE_API:"https://dev-aurora-srv.hellobike.cn",DATABOX_API:"http://121.40.107.27:21010",BOX_API:"https://databox-srv.hellobike.cn"},fat:{SPACE_API:"https://fat-aurora-srv.hellobike.cn",DATABOX_API:"http://121.40.107.27:21010",BOX_API:"https://gray-databox.hellobike.cn"},uat:{SPACE_API:"https://uat-aurora-srv.hellobike.cn",BOX_API:"https://gray-databox.hellobike.cn"},pro:{SPACE_API:"https://aurora-srv.hellobike.cn",DATABOX_API:"https://dataassetgw.hellobike.com",BOX_API:"https://databox-srv.hellobike.cn"}};e["a"]=n.dev},"20a7":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"config"},[a("tabContainer",{attrs:{data:t.data}},[a("el-tab-pane",{attrs:{label:"数据"}},[a("dataContainer",{attrs:{data:t.data}},[a("chartContainer",{attrs:{data:t.data}})],1)],1),a("el-tab-pane",{attrs:{label:"显示"}},[a("showContainer",{attrs:{data:t.data}})],1)],1)],1)},s=[],i=a("0c0e"),r=a("29c3"),l=a("0dfd"),o=a("db77"),c={name:"LineConfig",components:{tabContainer:i["a"],dataContainer:r["a"],chartContainer:o["a"],showContainer:l["a"]},props:{data:{type:Object,default:function(){return{}}}}},u=c,d=(a("06a7"),a("2877")),p=Object(d["a"])(u,n,s,!1,null,"3820ea34",null);e["default"]=p.exports},2564:function(t,e,a){},"27cc":function(t,e,a){"use strict";a.d(e,"f",function(){return n}),a.d(e,"a",function(){return s}),a.d(e,"d",function(){return i}),a.d(e,"b",function(){return r}),a.d(e,"c",function(){return d}),a.d(e,"e",function(){return m});a("ac6a"),a("7f7f");var n=[{icon:"Search",name:"查询控件"},{icon:"Tab",name:"Tab控件"}],s=[{icon:"Select",name:"选择框"},{icon:"Date",name:"日期"},{icon:"Line",name:"折线图"},{icon:"Bar",name:"柱状图"},{icon:"Comb",name:"组合图"},{icon:"Lou",name:"漏斗图"},{icon:"Pie",name:"饼图"},{icon:"Label",name:"标签卡"},{icon:"Table",name:"表格"}];function i(t,e,a){var n=1,s=null;while(n>0)s="".concat(a+n),t.labelMap[s]?n+=1:(e.label.text=s,e.label.subText||(e.label.subText=null),t.labelMap[s]=!0,n=0)}function r(t,e){e.forEach(function(e){if(delete t.labelMap[e.styles.label.text],"Search"===e.type){var a=e.styles.compList;a&&r(t,a)}else if("Tab"===e.type){var n=e.styles.tabList;n.forEach(function(e){e.compList&&r(t,e.compList)})}})}function l(){return{lineParams:{smooth:!1,stack:null,areaStyle:null},barParams:{vertical:!0,stack:null},labelNormal:{show:!1,position:"top"},label:{text:null,subtext:null},tooltip:{show:!0,confine:!0,trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}}},legend:{data:[],show:!0,type:"scroll",top:"top",padding:[30,20,20,15]},series:[],xAxis:[{type:"category",data:[],select:[],splitLine:{show:!0},axisLabel:{show:!0},show:!0,name:null}],yAxis:[{type:"value",min:"dataMin",show:!0,name:null,select:[],splitLine:{show:!0},axisLabel:{show:!0}},{type:"value",min:"dataMin",show:!0,name:null,select:[],splitLine:{show:!0},axisLabel:{show:!0}}]}}function o(t,e){var a=l();if("Line"===e)return i(t,a,"折线图"),a;if("Bar"===e)return i(t,a,"柱状图"),a;if("Comb"===e)return i(t,a,"组合图"),a;if("Label"===e){var n={label:{text:null,subtext:null}};return i(t,n,"标签卡"),n}if("Pie"===e){var s={label:{text:null,subtext:null},labelNormal:{show:!0,position:"outside",formatter:"{b} : {c} ({d}%)"},tooltip:{confine:!0,trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{show:!0,top:"top",type:"scroll",padding:[30,20,20,15],data:[]},series:[{name:"饼图",type:"pie",radius:"75%",center:["45%","60%"],top:60,bottom:35,data:[],emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]};return i(t,s,"饼图"),s}if("Lou"===e){var r={label:{text:null,subtext:null},labelNormal:{show:!0,position:"left",formatter:"{b} : {c} {d}%"},tooltip:{confine:!0,trigger:"item",formatter:"{a} <br/>{b} : {c} {d}%"},legend:{show:!0,type:"scroll",top:"top",padding:[30,20,20,15],data:[]},series:[{name:"漏斗图",type:"funnel",left:"10%",top:60,bottom:35,width:"80%",min:0,max:100,minSize:"0%",maxSize:"100%",sort:"none",gap:2,emphasis:{label:{fontSize:20}},data:[]}]};return i(t,r,"漏斗图"),r}if("Tab"===e){var o={label:{},tabPosition:"top",tabList:[]};return i(t,o,"Tab"),o}if("Search"===e){var c={label:{},compList:[],btnName:"查询"};return i(t,c,"搜索框"),c}if("Select"===e){var u={label:{},value:null,multiple:!1,columnVal:{},columnName:{},map:{}};return i(t,u,"选择框"),u}if("Date"===e){var d={label:{},value:null,type:"daterange",time:{show:!0,position:"pre",value:1,unit:86400},map:{}};return i(t,d,"日期"),d}if("Table"===e){var p={label:{},indexNo:!1,position:"center",page:!1};return i(t,p,"表格"),p}return{}}function c(t,e){return"Tab"===e||"Search"===e?t.colNum:t.searchComps[e]?t.colNum/4:t.colNum/2}function u(t,e){return"Search"===e?3:t.searchComps[e]?2:10}function d(t,e,a){var n=t.type,s=t.x,i=t.y;return{i:e,type:n,x:s,y:i,h:u(a,n),w:c(a,n),styles:o(a,n),params:{}}}function p(t,e,a,n){for(var s=0,i=t.length;s<i;s+=1)if("Tab"===t[s].type)t[s].styles.tabList.forEach(function(t){p(t.compList||[],e,a,n)});else if(t[s].i===e)return delete n.labelMap[t[s].styles.label.text],t.splice(s,1),void t.push(a)}function f(t,e){var a=t.params,n=e.params;if("Table"!==e.type)"Table"===t.type&&(a.pageNo=1,a.hasMetric="columns",a.rows=n.dimensions,a.columns=n.metrics,delete n.metrics,delete n.dimensions);else{delete n.pageNo,delete n.hasMetric;var s=n.rows,i=n.columns;a.dimensions=[],a.metrics=[],s.concat(i).forEach(function(t){"dimension"===t.dmType?a.dimensions.push(t):a.metrics.push(t)})}Object.assign(a,n);var r=t.styles,l=e.styles,o=r.xAxis,c=r.yAxis;o instanceof Array&&(l.xAxis instanceof Array?(o[0].select=l.xAxis[0].select&&l.xAxis[0].select[0]?[l.xAxis[0].select[0]]:[],c[0].select=l.yAxis[0].select||[],c[1].select=l.yAxis[1].select||[]):(o[0].select=a.dimensions[0]?[a.dimensions[0]]:[],c[0].select=a.metrics[0]?[a.metrics[0]]:[],c[1].select=[]))}function m(t,e){var a=t.activeComp;f(e,a),p(t.compList,a.i,e,t)}},"29c3":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("div",{staticClass:"left"},[t._t("default")],2),a("div",{staticClass:"right"},[t.dataAnalyName?a("el-input",{attrs:{readonly:""},model:{value:t.dataAnalyName,callback:function(e){t.dataAnalyName=e},expression:"dataAnalyName"}}):[a("el-select",{style:{width:t.dataset?"calc(100% - 25px)":"100%"},attrs:{placeholder:"请选择数据集","value-key":"id","popper-append-to-body":!1},on:{change:t.setChange},model:{value:t.dataset,callback:function(e){t.dataset=e},expression:"dataset"}},t._l(t.datasetList,function(t,e){return a("el-option",{key:e+"set",attrs:{value:t,label:t.name}})}),1),t.dataset&&!t.urlParams.dataSetId?a("i",{staticClass:"el-icon-edit",staticStyle:{cursor:"pointer","margin-left":"5px"},on:{click:t.editdataset}}):t._e()],t._l(t.xyList,function(e,n){return a("div",{key:n+"xy",staticClass:"dataset"},[a("div",{staticClass:"title"},[a("i",{class:"iconfont "+e.icon}),a("span",[t._v(t._s(e.name))]),"维度"===e.name?a("el-input",{attrs:{"suffix-icon":"el-icon-search",placeholder:"请查询维度"},model:{value:t.searchx,callback:function(e){t.searchx=e},expression:"searchx"}}):a("el-input",{attrs:{"suffix-icon":"el-icon-search",placeholder:"请查询度量"},model:{value:t.searchy,callback:function(e){t.searchy=e},expression:"searchy"}})],1),a("div",{staticClass:"data-container"},[a("ul",{staticClass:"list-container"},t._l(t.filterXY(e.type),function(e,n){return a("li",{key:n,attrs:{draggable:""},on:{dragstart:function(a){return a.stopPropagation(),function(a){t.dragstart(a,e)}(a)}}},[a("i",{class:"iconfont icon-"+e.dataType}),a("span",{class:{double:"double"===e.dataType}},[t._v(t._s(e.label))])])}),0)])])})],2)])},s=[],i=(a("ac6a"),a("768b")),r=(a("7f7f"),a("b122")),l=a("caf0"),o=a("ff4c"),c={props:{data:{type:Object,default:function(){return{}}}},data:function(){return{dataAnalyName:null,dataset:null,searchx:"",searchy:"",datasetList:[],xList:[],yList:[]}},computed:{filterXY:function(){var t=this;return function(e){return t["".concat(e,"List")].filter(function(a){return a.label.indexOf(t["search".concat(e)])>-1})}}},created:function(){this.xyList=o["d"],this.urlParams=this.$route.params,this.urlParams&&void 0!==this.urlParams.projectId?this.queryOnlineSets({projectId:parseFloat(this.urlParams.projectId),directoryId:parseFloat(this.urlParams.parentId)}):this.urlParams&&void 0!==this.urlParams.dataSetId&&(this.dataAnalyName=this.urlParams.dataSetName,this.queryXyOnline(this.urlParams))},methods:{editdataset:function(){var t=this,e=this.dataset,a=e.id,n=e.type,s=e.projectId,i=e.directoryId;Object(r["j"])({id:a,type:n}).then(function(e){t.$router.push({name:"es"===n?"createSpaceES":"createSpaceSQL",params:{res:e,look:null,panel:!0,type:e.dataSet.dataSourceType,parentId:i,projectId:s,breadList:[]}})})},setDataSet:function(t){this.datasetList=t;var e=this.data.params,a=e.dataSetType,n=e.dataSetId;if(a)for(var s=0,r=this.datasetList.length;s<r;s+=1){var l=this.datasetList[s],o=l.id,c=l.type,u=l.name;if(n===o&&a===c)return this.dataset=this.datasetList[s],void this.setChange({id:o,type:c,name:u})}else if(this.datasetList.length>0){var d=this.datasetList[0],p=(o=d.id,c=d.type,u=d.name,Object(i["a"])(this.datasetList,1));this.dataset=p[0],this.setChange({id:o,type:c,name:u})}},queryOnlineSets:function(t){var e=this;this.$store.state.panel.datasetList?this.setDataSet(this.$store.state.panel.datasetList):Object(l["e"])(t).then(function(t){e.$store.state.panel.datasetList=t,e.setDataSet(t)})},queryXyOnline:function(t){var e=this;Object(l["f"])(t).then(function(a){e.xList=[],e.yList=[],a.forEach(function(a){a.dataSetName=t.dataSetName,"dimension"===a.type?e.xList.push(a):e.yList.push(a)})})},setChange:function(t){this.queryXyOnline({dataSetId:t.id,dataSetType:t.type,dataSetName:t.name})},dragstart:function(t,e){t.dataTransfer.setData("data",JSON.stringify(e))}}},u=c,d=(a("7d7b5"),a("2877")),p=Object(d["a"])(u,n,s,!1,null,"9af4590a",null);e["a"]=p.exports},"2a88":function(t,e,a){"use strict";var n=a("eaf9"),s=a.n(n);s.a},"2d38":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"config"},[a("tabContainer",{attrs:{data:t.data}},[a("el-tab-pane",{attrs:{label:"数据"}},[a("dataContainer",{attrs:{data:t.data}},[a("chartContainer",{attrs:{data:t.data}})],1)],1),a("el-tab-pane",{attrs:{label:"显示"}},[a("el-form",{attrs:{"label-position":"right","label-width":"130px"}},[a("div",{staticClass:"title"},[t._v("基础信息")]),a("el-form",{attrs:{"label-width":"50px"}},[[a("el-form-item",{attrs:{label:"标题"}},[a("el-input",{attrs:{placeholder:"请输入标题"},model:{value:t.styles.label.text,callback:function(e){t.$set(t.styles.label,"text",e)},expression:"styles.label.text"}})],1),a("el-form-item",{attrs:{label:"备注"}},[a("el-input",{attrs:{placeholder:"请输入备注"},model:{value:t.styles.label.subText,callback:function(e){t.$set(t.styles.label,"subText",e)},expression:"styles.label.subText"}})],1)]],2),a("div",{staticClass:"title"},[t._v("图表样式")]),a("el-form-item",{attrs:{label:"显示图表图例"}},[a("el-switch",{attrs:{"active-color":"#409EFF","inactive-color":"#eee"},model:{value:t.styles.legend.show,callback:function(e){t.$set(t.styles.legend,"show",e)},expression:"styles.legend.show"}}),t.styles.legend.show?[a("label",{staticClass:"position"},[t._v("位置")]),a("el-select",{style:{width:"68px"},attrs:{"popper-append-to-body":!1},model:{value:t.styles.legend.top,callback:function(e){t.$set(t.styles.legend,"top",e)},expression:"styles.legend.top"}},[a("el-option",{attrs:{label:"上",value:"top"}}),a("el-option",{attrs:{label:"中",value:"middle"}}),a("el-option",{attrs:{label:"下",value:"bottom"}})],1)]:t._e()],2)],1)],1)],1)],1)},s=[],i=a("0c0e"),r=a("29c3"),l=a("db77"),o={name:"PieConfig",components:{tabContainer:i["a"],dataContainer:r["a"],chartContainer:l["a"]},props:{data:{type:Object,default:function(){return{}}}},data:function(){return{styles:this.data.styles}}},c=o,u=(a("8bf1"),a("2877")),d=Object(u["a"])(c,n,s,!1,null,"74c84dc1",null);e["default"]=d.exports},3157:function(t,e,a){"use strict";var n=a("3c84"),s=a.n(n);s.a},"34ff":function(t,e,a){},"358d":function(t,e,a){},"35de":function(t,e,a){},"381e":function(t,e,a){},3909:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Chart",{attrs:{data:t.data},on:{apply:t.applyChart}},[t._t("default")],2)},s=[],i=(a("6762"),a("2fdb"),a("7514"),a("7f7f"),a("ac6a"),a("e61b")),r=a("ed08"),l={name:"BarComp",components:{Chart:i["a"]},props:{data:{type:Object,default:function(){return{}}}},methods:{applyChart:function(t){var e=t.res,a=t.chartData,n=t.myChart;this.exportData=e;var s=e.result;this.myChart=n;var i=a.styles,l=i.xAxis,o=i.yAxis,c=i.legend,u=i.labelNormal,d=i.barParams;i.tooltip.formatter=function(t){var e=[];if(t.forEach(function(t){var n=t.seriesName,s=t.value,i=t.name,r=t.marker,l=a.params.metrics.find(function(t){return t.label===n}),o=l.formatThousand,c=l.formatType,u=l.formatNum;e.push({seriesName:n,value:s,name:i,marker:r,formatThousand:o,formatType:c,formatNum:u})}),0===e.length)return null;var n="".concat(e[0].name,"<br/>");return e.forEach(function(t){var e=t.seriesName,a=t.value,s=t.marker,i=t.formatThousand,l=t.formatType,o=t.formatNum,c=("percent"===l?100*a:a).toFixed(o);c=i?Object(r["a"])(c):c,c="percent"===l?"".concat(c,"%"):c,n+="".concat(s+e,": ").concat(c,"<br/>")}),n};var p=d.vertical,f=d.stack,m=null,h=null,b={},y=[];l[0].select.forEach(function(t,e){0===e?m=t.column:h=t.column}),[0,1].forEach(function(t){o[t].select.forEach(function(e){y.push({yAxisIndex:t,label:e.label,column:e.aggregate?"".concat(e.aggregate.toUpperCase(),"(").concat(e.column,")"):e.column||e.expression})})}),l[0].data=[],c.data=[];var v={};if(i.series=[],s.forEach(function(t){t[m]&&!l[0].data.includes(t[m])&&l[0].data.push(t[m]),b[t[m]]=b[t[m]]||{};var e=b[t[m]];y.forEach(function(a){var n=(h?"".concat(t[h],"-"):"")+a.label;e[n]=t[a.column];var s={name:n,yAxisIndex:a.yAxisIndex};v[n]||(v[n]=!0,c.data.push(s))})}),c.data.forEach(function(t){var e=t.name,n=t.yAxisIndex,s=[];l[0].data.forEach(function(t){s.push(b[t][e])});var o={name:e,type:"bar",stack:f,label:{normal:Object.assign(u,{formatter:function(t){var e=t.seriesName,n=t.value,s=a.params.metrics.find(function(t){return t.label===e}),i=s.formatThousand,l=s.formatType,o=s.formatNum,c=("percent"===l?100*n:n).toFixed(o);return c=i?Object(r["a"])(c):c,c="percent"===l?"".concat(c,"%"):c,c}})},data:s};p?o.yAxisIndex=n:o.xAxisIndex=n,i.series.push(o)}),!p){var g=i.xAxis;i.xAxis=o,i.yAxis=g}this.myChart.resize(),this.myChart.setOption(i,!0)},resize:function(){this.myChart&&this.myChart.resize()}}},o=l,c=a("2877"),u=Object(c["a"])(o,n,s,!1,null,null,null);e["default"]=u.exports},"3c84":function(t,e,a){},"40ee":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"drag-container",on:{dragover:function(t){t.preventDefault()},drop:function(e){return e.preventDefault(),e.stopPropagation(),t.drop(e)}}},[t.list.length>0?a("grid-layout",{attrs:{layout:t.list,"col-num":t.$store.state.panel.colNum,"row-height":t.$store.state.panel.rowHeight,isResizable:!t.preView,isDraggable:!t.preView,responsive:!1,margin:[10,10]},on:{"update:layout":function(e){t.list=e}}},t._l(t.list,function(e,n){return a("grid-item",{key:e.i,attrs:{x:e.x,y:e.y,w:e.w,h:e.h,i:e.i}},[a(e.type+"Comp",{directives:[{name:"resize",rawName:"v-resize:debounce",value:function(a){t.resized("ref"+e.i)},expression:"(h)=>{resized('ref'+comp.i)}",arg:"debounce"}],ref:"ref"+e.i,refInFor:!0,tag:"component",staticClass:"comp",class:{active:e.i===t.$store.state.panel.activeComp.i&&!t.preView},attrs:{data:e},nativeOn:{click:function(a){return a.stopPropagation(),t.$store.commit("changeActiveComp",e)}}},[t.$store.state.panel.searchComps[e.type]||"Search"===e.type?t._e():a("div",{staticClass:"utils-title"},[a("span",[t._v(t._s(e.styles.label.text))]),a("i",{staticClass:"iconfont icon-tooltip",attrs:{title:e.styles.label.subText}})]),a("el-popover",{staticClass:"utils-more",attrs:{placement:"right","popper-class":"space",trigger:"hover"}},[t.$store.state.panel.searchComps[e.type]||"Search"===e.type||"Tab"===e.type?t.preView?t._e():[a("ul",{staticClass:"utils-ui"},[a("li",{on:{click:function(a){return t.utilsClick("del",e,n)}}},[a("i",{staticClass:"iconfont icon-shanchu-copy-copy",attrs:{slot:"reference"},slot:"reference"}),t._v(" 删除")])]),a("i",{staticClass:"iconfont icon-msnui-more",attrs:{slot:"reference"},slot:"reference"})]:[a("ul",{staticClass:"utils-ui"},[t.preView?t._e():[a("li",{on:{click:function(a){return t.utilsClick("move",e,n)}}},[a("i",{staticClass:"iconfont icon-move",attrs:{slot:"reference"},slot:"reference"}),t._v(" 移动至")]),a("li",{on:{click:function(a){return t.utilsClick("copy",e,n)}}},[a("i",{staticClass:"iconfont icon-fuzhi",attrs:{slot:"reference"},slot:"reference"}),t._v(" 复制")]),a("li",{on:{click:function(a){return t.utilsClick("del",e,n)}}},[a("i",{staticClass:"iconfont icon-shanchu-copy-copy",attrs:{slot:"reference"},slot:"reference"}),t._v(" 删除")])],[a("li",{on:{click:function(a){return t.utilsClick("export",e,n)}}},[a("i",{staticClass:"iconfont icon-daochu",attrs:{slot:"reference"},slot:"reference"}),t._v(" 导出")]),a("li",{on:{click:function(a){return t.utilsClick("sql",e,n)}}},[a("i",{staticClass:"iconfont icon-sql",attrs:{slot:"reference"},slot:"reference"}),t._v(" 查看SQL")])]],2),a("i",{staticClass:"iconfont icon-msnui-more",attrs:{slot:"reference"},slot:"reference"})]],2)],1)],1)}),1):a("NoData"),t.dialogVisible?a("DragDialog",{attrs:{dVisible:t.dialogVisible,dialogData:t.dialogData},on:{"update:dVisible":function(e){t.dialogVisible=e},"update:d-visible":function(e){t.dialogVisible=e},ok:t.dialogOk}}):t._e()],1)},s=[],i=(a("8615"),a("ac6a"),a("7be8")),r=a.n(i),l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"noneC"},[t._v("\n  "+t._s(t.title)+"\n")])},o=[],c={props:{title:{type:String,default:"添加组件，快开始吧"}}},u=c,d=(a("0e52"),a("2877")),p=Object(d["a"])(u,l,o,!1,null,"abcaa086",null),f=p.exports,m=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:t.title,visible:t.dialogVisible,"close-on-click-modal":!1,"append-to-body":!0,width:"move"===t.type?"35%":"50%"},on:{"update:visible":function(e){t.dialogVisible=e},close:function(e){return t.$emit("update:dVisible",!1)}}},["move"===t.type?[a("el-form",{ref:"form",attrs:{model:t.form,"label-width":"100px"}},[a("el-form-item",{attrs:{prop:"val",label:"移动区域",rules:[{required:!0,message:"移动区域不能为空"}]}},[a("el-cascader",{ref:"cascader",attrs:{filterable:"",props:{expandTrigger:"hover"},options:t.tabList},model:{value:t.form.val,callback:function(e){t.$set(t.form,"val",e)},expression:"form.val"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.submitForm}},[t._v("确 定")])],1)]:t._e(),"sql"===t.type?a("div",{staticStyle:{position:"relative"}},[a("textarea",{ref:"textarea"}),a("i",{staticClass:"iconfont icon-fuzhi",style:{position:"absolute",top:"5px",right:"5px",color:"#fff",cursor:"pointer","z-index":1e3},attrs:{title:"复制"},on:{click:t.copySql}})]):t._e()],2)},h=[],b=a("56b3"),y=a.n(b),v=a("db05"),g=a.n(v),x=(a("a7be"),a("498a"),a("ffda"),{props:{dVisible:{type:Boolean,default:!1},dialogData:{type:Object,default:function(){return{}}}},data:function(){return{dialogVisible:this.dVisible,form:{val:null}}},created:function(){this.type=this.dialogData.mask,"move"===this.type?(this.title="移动至",this.moveInit()):"sql"===this.type&&(this.title="查看SQL",this.initCodeMirror())},methods:{copySql:function(){this.copyInputInstance||(this.copyInputInstance=document.createElement("input"),document.body.appendChild(this.copyInputInstance)),this.copyInputInstance.style.display="block",this.copyInputInstance.value=this.dialogData.SQL,this.copyInputInstance.select(),document.execCommand("Copy"),this.copyInputInstance.style.display="none",this.$message({type:"success",message:"复制成功"})},initCodeMirror:function(){var t=this;this.$nextTick(function(){t.coder=y.a.fromTextArea(t.$refs.textarea,{tabSize:2,theme:"yonce",lineNumbers:!0,line:!0,mode:"text/x-sql",readOnly:!0});var e=g.a.format(t.dialogData.SQL||"");t.coder.setValue(e)})},moveInit:function(){var t=this.getIsOuter();this.tabList=t?[]:[{label:"最外层容器",value:"最外层容器",list:this.$store.state.panel.compList}],this.setTabList(this.tabList,this.$store.state.panel.compList)},getIsOuter:function(){for(var t=this.$store.state.panel.compList,e=0;e<t.length;e+=1)if(t[e].i===this.dialogData.comp.i)return!0;return!1},setTabList:function(t,e){var a=this;e.forEach(function(e){if("Tab"===e.type){var n=e.styles,s=n.tabList,i=n.label,r=[];a.setTabList(r,s),t.unshift({label:i.text,value:i.text,children:r})}else{var l=e.title,o=e.compList;l&&o&&t.unshift({label:l,value:l,list:o})}})},submitForm:function(){var t=this;this.$refs.form.validate(function(e){if(e){t.dialogVisible=!1;var a=t.$refs.cascader.getCheckedNodes()[0].data;t.$emit("ok",t.dialogData,a.list)}})}}}),k=x,C=Object(d["a"])(k,m,h,!1,null,null,null),w=C.exports,S=a("d032"),_=a("27cc"),T=a("7618"),$=(a("34ef"),a("1146")),L=a.n($);function j(t){for(var e=new ArrayBuffer(t.length),a=new Uint8Array(e),n=0;n<t.length;n+=1)a[n]=255&t.charCodeAt(n);return e}function O(t,e){var a=e||"sheet1",n={SheetNames:[a],Sheets:{}};n.Sheets[a]=t;var s={bookType:"xlsx",bookSST:!1,type:"binary"},i=L.a.write(n,s),r=new Blob([j(i)],{type:"application/octet-stream"});return r}function D(t,e){var a=t;"object"===Object(T["a"])(a)&&a instanceof Blob&&(a=URL.createObjectURL(a));var n,s=document.createElement("a");s.href=a,s.download=e||"",window.MouseEvent?n=new MouseEvent("click"):(n=document.createEvent("MouseEvents"),n.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null)),s.dispatchEvent(n)}var E=function(t,e,a){if(t instanceof Array){var n=L.a.utils.aoa_to_sheet(t),s=O(n,e);D(s,a||"导出.xlsx")}},A={components:{DragDialog:w,NoData:f,GridLayout:r.a.GridLayout,GridItem:r.a.GridItem},props:{obj:{type:Object,default:function(){return{}}},list:{type:Array,default:function(){return[]}}},data:function(){return{preView:this.$store.state.panel.preView,dialogVisible:!1,dialogData:{}}},methods:{resized:function(t){var e=this.$refs[t];e&&e[0]&&e[0].resize&&e[0].resize()},drop:function(t){var e=t.dataTransfer.getData("type");e&&!this.preView&&this.$store.commit("addComp",{type:e,x:0,y:0,list:this.list,compType:this.obj.type,vm:this})},dialogOk:function(t,e){var a=t.index,n=t.comp;this.list.splice(a,1),e.unshift(n)},formatDateTime:function(t){var e=t.getFullYear(),a=t.getMonth()+1;a=a<10?"0".concat(a):a;var n=t.getDate();return n=n<10?"0".concat(n):n,"".concat(e,"-").concat(a,"-").concat(n)},utilsClick:function(t,e,a){if("copy"===t){var n=(new Date).getTime(),s=Object(S["a"])(e);s.i=n;var i=s.styles;Object(_["d"])(this.$store.state.panel,i,"".concat(i.label.text,"_副本")),this.list.unshift(s)}else if("move"===t)this.dialogVisible=!0,this.dialogData={index:a,comp:e,mask:t};else if("sql"===t){this.dialogVisible=!0;var r=this.$refs["ref".concat(e.i)][0].exportData;this.dialogData={index:a,comp:e,mask:t,SQL:r?r.query:null}}else if("export"===t){var l=[],o=this.$refs["ref".concat(e.i)][0].exportData;if(o){var c=o.columns,u=o.result,d=[];c.forEach(function(t){d.push(t.label)}),l.push(d),u.forEach(function(t){l.push(Object.values(t))}),E(l,"sheet1","".concat(e.styles.label.text,"_").concat(this.formatDateTime(new Date),".xlsx"))}else this.$message.warning("无数据")}else"del"===t&&(Object(_["b"])(this.$store.state.panel,[e]),this.list.splice(a,1))}}},N=A,I=(a("917f"),Object(d["a"])(N,n,s,!1,null,"f48aa65c",null));e["a"]=I.exports},4735:function(t,e,a){"use strict";var n=a("50bd"),s=a.n(n);s.a},"484e":function(t,e,a){},"4b59":function(t,e,a){"use strict";var n=a("e4b8"),s=a.n(n);s.a},"4cd2":function(t,e,a){},"4d14":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"config"},[a("tabContainer",{attrs:{data:t.data}},[a("el-tab-pane",{attrs:{label:"显示"}},[a("el-form",{attrs:{"label-width":"80px"}},[a("el-form-item",{attrs:{label:"按钮名称"}},[a("el-input",{attrs:{placeholder:"请输入按钮名称"},model:{value:t.data.styles.btnName,callback:function(e){t.$set(t.data.styles,"btnName",e)},expression:"data.styles.btnName"}})],1)],1)],1)],1)],1)},s=[],i=a("0c0e"),r={name:"SearchConfig",components:{tabContainer:i["a"]},props:{data:{type:Object,default:function(){return{}}}}},l=r,o=(a("106f"),a("2877")),c=Object(o["a"])(l,n,s,!1,null,"494d486e",null);e["default"]=c.exports},"4eee":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"config"},[a("tabContainer",{attrs:{data:t.data}},[a("el-tab-pane",{attrs:{label:"显示"}},[a("el-form",{attrs:{"label-width":"80px"}},[a("div",{staticClass:"title"},[t._v("基础信息")]),[a("el-form-item",{attrs:{label:"标题"}},[a("el-input",{attrs:{placeholder:"请输入标题"},model:{value:t.styles.label.text,callback:function(e){t.$set(t.styles.label,"text",e)},expression:"styles.label.text"}})],1),a("el-form-item",{attrs:{label:"备注"}},[a("el-input",{attrs:{placeholder:"请输入备注"},model:{value:t.styles.label.subText,callback:function(e){t.$set(t.styles.label,"subText",e)},expression:"styles.label.subText"}})],1)],a("el-form-item",{attrs:{label:"Tab 位置"}},[a("el-select",{attrs:{"popper-append-to-body":!1},model:{value:t.styles.tabPosition,callback:function(e){t.$set(t.styles,"tabPosition",e)},expression:"styles.tabPosition"}},[a("el-option",{attrs:{value:"left"}}),a("el-option",{attrs:{value:"right"}}),a("el-option",{attrs:{value:"top"}}),a("el-option",{attrs:{value:"bottom"}})],1)],1),a("el-form-item",{attrs:{label:"Tab 标签"}},[a("div",{staticClass:"plus"},[a("i",{staticClass:"iconfont icon-plus",on:{click:t.add}}),a("span",[t._v("添加")])]),a("draggable",{attrs:{list:t.styles.tabList}},t._l(t.styles.tabList,function(e,n){return a("div",{key:e.id,staticClass:"list-item"},[a("el-input",{attrs:{placeholder:"请输入tab标签"},model:{value:e.title,callback:function(a){t.$set(e,"title",a)},expression:"obj.title"}}),a("i",{staticClass:"iconfont icon-shanchu-copy-copy",on:{click:function(e){return t.styles.tabList.splice(n,1)}}})],1)}),0)],1)],2)],1)],1)],1)},s=[],i=a("310e"),r=a.n(i),l=a("0c0e"),o={name:"TabConfig",components:{tabContainer:l["a"],draggable:r.a},props:{data:{type:Object,default:function(){return{}}}},data:function(){return{styles:this.data.styles}},methods:{add:function(){this.styles.tabList.push({id:(new Date).getTime(),title:null,compList:[]})}}},c=o,u=(a("eeb4"),a("2877")),d=Object(u["a"])(c,n,s,!1,null,"343d58bd",null);e["default"]=d.exports},5006:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"compSelect"},[t.data.styles.compList.length>0?a("el-button",{attrs:{type:"primary"},on:{click:t.search}},[t._v(t._s(t.data.styles.btnName))]):t._e(),a("dragContainer",{attrs:{obj:t.data,list:t.data.styles.compList}}),t._t("default")],2)},s=[],i=(a("456d"),a("ac6a"),a("386d"),a("40ee")),r={name:"SearchComp",components:{dragContainer:i["a"]},props:{data:{type:Object,default:function(){return{}}}},created:function(){this.search()},methods:{search:function(){var t=this,e=this.data.styles.compList,a=[];e.forEach(function(t){a.push({value:t.styles.value,map:t.styles.map,type:t.type})});var n={};a.forEach(function(t){for(var e=t.map,a=t.value,s=t.type,i=Object.keys(e),r=0,l=i.length;r<l;r+=1){var o=i[r];if(e[o]){n[o]||(n[o]=[]);var c=e[o],u=c.column,d=c.aggregate,p=c.expression,f=d?"".concat(d.toUpperCase(),"(").concat(u,")"):u||p;a&&""!==a&&("Date"===s?(n[o].push({column:f,value:a[0],operator:">="}),n[o].push({column:f,value:a[1],operator:"<"})):n[o].push({column:f,value:a,operator:a instanceof Array?"in":"="}))}}});var s=this.$store.state.panel.preView;Object.keys(n).forEach(function(e){t.$store._vm.$emit("".concat(e,"search").concat(s),n[e])})}}},l=r,o=(a("4735"),a("2877")),c=Object(o["a"])(l,n,s,!1,null,"ac5f692e",null);e["default"]=c.exports},"50bd":function(t,e,a){},"54ef":function(t,e,a){},"556c":function(t,e,a){"use strict";var n=a("54ef"),s=a.n(n);s.a},"563b":function(t,e,a){"use strict";var n=a("f617"),s=a.n(n);s.a},"5e74":function(t,e,a){},"5ff7":function(t,e,a){},6264:function(t,e,a){"use strict";var n=a("2564"),s=a.n(n);s.a},6961:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Chart",{attrs:{data:t.data},on:{apply:t.applyChart}},[t._t("default")],2)},s=[],i=(a("7f7f"),a("ac6a"),a("e61b")),r=a("ed08"),l={name:"PieComp",components:{Chart:i["a"]},props:{data:{type:Object,default:function(){return{}}}},methods:{applyChart:function(t){var e=t.res,a=t.chartData,n=t.myChart;this.exportData=e;var s=e.result;this.myChart=n;var i=a.styles,l=a.params,o=l.dimensions,c=l.metrics,u=[],d=[];s.forEach(function(t){var e=t[o[0].column],a=t[c[0].aggregate?"".concat(c[0].aggregate.toUpperCase(),"(").concat(c[0].column,")"):c[0].column||c[0].expression];u.push(e),d.push({name:e,value:a})}),i.tooltip.formatter=function(t){var e=t.seriesName,n=t.name,s=t.value,i=t.marker,l=t.percent,o=a.params.metrics[0],c=o.formatThousand,u=o.formatType,d=o.formatNum,p=("percent"===u?100*s:s).toFixed(d);return p=c?Object(r["a"])(p):p,p="percent"===u?"".concat(p,"%"):p,"".concat(e,"<br/>").concat(i+n,": ").concat(p," ").concat(l,"%")},i.legend.data=u,i.series[0].name=i.label.text,i.series[0].data=d,i.series[0].label=Object.assign(i.labelNormal,{formatter:function(t){var e=t.value,n=t.percent,s=t.name,i=a.params.metrics[0],l=i.formatThousand,o=i.formatType,c=i.formatNum,u=("percent"===o?100*e:e).toFixed(c);return u=l?Object(r["a"])(u):u,u="percent"===o?"".concat(u,"%"):u,"".concat(s," ").concat(u," ").concat(n,"%")}}),this.myChart.resize(),this.myChart.setOption(i,!0)},resize:function(){this.myChart&&this.myChart.resize()}}},o=l,c=a("2877"),u=Object(c["a"])(o,n,s,!1,null,null,null);e["default"]=u.exports},"6af0":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"config"},[a("tabContainer",{attrs:{data:t.data}},[a("el-tab-pane",{attrs:{label:"数据"}},[a("dataContainer",{attrs:{data:t.data}},[a("chartContainer",{attrs:{data:t.data}})],1)],1),a("el-tab-pane",{attrs:{label:"显示"}},[a("el-form",{attrs:{"label-width":"80px"}},[a("div",{staticClass:"title"},[t._v("基础信息")]),[a("el-form-item",{attrs:{label:"标题"}},[a("el-input",{attrs:{placeholder:"请输入标题"},model:{value:t.styles.label.text,callback:function(e){t.$set(t.styles.label,"text",e)},expression:"styles.label.text"}})],1),a("el-form-item",{attrs:{label:"备注"}},[a("el-input",{attrs:{placeholder:"请输入备注"},model:{value:t.styles.label.subText,callback:function(e){t.$set(t.styles.label,"subText",e)},expression:"styles.label.subText"}})],1)],a("div",{staticClass:"title"},[t._v("图表样式")]),a("el-form-item",{attrs:{label:"显示序号"}},[a("el-switch",{attrs:{"active-color":"#409EFF","inactive-color":"#eee"},model:{value:t.styles.indexNo,callback:function(e){t.$set(t.styles,"indexNo",e)},expression:"styles.indexNo"}})],1),a("el-form-item",{attrs:{label:"对齐方式"}},[a("el-select",{style:{width:"88px"},attrs:{"popper-append-to-body":!1},model:{value:t.styles.position,callback:function(e){t.$set(t.styles,"position",e)},expression:"styles.position"}},[a("el-option",{attrs:{label:"居中",value:"center"}}),a("el-option",{attrs:{label:"左对齐",value:"left"}}),a("el-option",{attrs:{label:"右对齐",value:"right"}})],1)],1)],2)],1)],1)],1)},s=[],i=a("0c0e"),r=a("29c3"),l=a("db77"),o={name:"TableConfig",components:{tabContainer:i["a"],dataContainer:r["a"],chartContainer:l["a"]},props:{data:{type:Object,default:function(){return{}}}},data:function(){return{styles:this.data.styles}}},c=o,u=(a("9bea"),a("2877")),d=Object(u["a"])(c,n,s,!1,null,"eccaad04",null);e["default"]=d.exports},7531:function(t,e,a){},7736:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"config"},[a("tabContainer",{attrs:{data:t.data}},[a("el-tab-pane",{attrs:{label:"显示"}},[a("el-form",{attrs:{"label-width":"80px"}},[a("el-form-item",{attrs:{label:"标题"}},[a("el-input",{attrs:{placeholder:"请输入日期标题"},model:{value:t.styles.label.text,callback:function(e){t.$set(t.styles.label,"text",e)},expression:"styles.label.text"}})],1),a("el-form-item",{attrs:{label:"绝对时间"}},[a("el-select",{staticStyle:{width:"60px"},attrs:{"popper-append-to-body":!1},model:{value:t.styles.time.position,callback:function(e){t.$set(t.styles.time,"position",e)},expression:"styles.time.position"}},[a("el-option",{attrs:{value:"pre",label:"前"}}),a("el-option",{attrs:{value:"next",label:"后"}})],1),a("el-input",{staticStyle:{width:"60px",margin:"0 10px"},attrs:{type:"number",min:0},model:{value:t.styles.time.value,callback:function(e){t.$set(t.styles.time,"value",e)},expression:"styles.time.value"}}),a("el-select",{staticStyle:{width:"60px"},attrs:{"popper-append-to-body":!1},model:{value:t.styles.time.unit,callback:function(e){t.$set(t.styles.time,"unit",e)},expression:"styles.time.unit"}},[a("el-option",{attrs:{value:86400,label:"天"}}),a("el-option",{attrs:{value:604800,label:"周"}}),a("el-option",{attrs:{value:2592e3,label:"月"}}),a("el-option",{attrs:{value:31104e3,label:"年"}})],1)],1)],1),[a("ul",{staticClass:"axis"},[a("li",{staticClass:"active"},[t._v("非同源关联")])]),a("div",{staticClass:"axis-container"},t._l(t.filterCompList,function(e,n){return a("div",{key:n+e.i,staticClass:"compDate"},[a("el-checkbox",{attrs:{checked:!!t.styles.map[e.i]},on:{change:function(a){return t.checkedChange(e.i)}}},[t._v(t._s(e.styles.label.text))]),void 0!==t.styles.map[e.i]?a("div",{staticClass:"dataset-container"},[a("div",{staticClass:"dataset"},[a("i",{staticClass:"iconfont icon-shujuji"}),a("span",[t._v(t._s(e.params.dataSetName))])]),a("div",{staticClass:"dataset sub"},[t.styles.map[e.i]?a("i",{class:"iconfont icon-"+t.styles.map[e.i].dataType}):t._e(),a("el-select",{attrs:{"popper-append-to-body":!1,placeholder:"请选择映射属性","value-key":"label"},model:{value:t.styles.map[e.i],callback:function(a){t.$set(t.styles.map,e.i,a)},expression:"styles.map[item.i]"}},t._l(t.getList(e),function(t,e){return a("el-option",{key:e,attrs:{value:t,label:t.label}})}),1)],1)]):t._e()],1)}),0)]],2)],1)],1)},s=[],i=(a("ac6a"),a("0c0e")),r={name:"DateConfig",components:{tabContainer:i["a"]},props:{data:{type:Object,default:function(){return{}}}},data:function(){return{styles:this.data.styles}},computed:{filterCompList:function(){var t=this.$store.state.panel.compList,e=[];return this.getDiffList(t,e),e}},methods:{checkedChange:function(t){void 0===this.styles.map[t]?this.$set(this.styles.map,t,null):(this.$set(this.styles.map,t,void 0),delete this.styles.map[t])},getList:function(t){return t.params.rows?t.params.rows.concat(t.params.columns):t.params.dimensions?t.params.dimensions.concat(t.params.metrics):[]},getDiffList:function(t,e){var a=this;t.forEach(function(t){if("Search"!==t.type&&"Tab"!==t.type){var n=t.params,s=n.dataSetId,i=n.dataSetType;s&&i&&e.push(t)}else"Tab"===t.type&&t.styles.tabList.forEach(function(t){a.getDiffList(t.compList||[],e)})})}}},l=r,o=(a("ed4f"),a("2877")),c=Object(o["a"])(l,n,s,!1,null,"2e4768ce",null);e["default"]=c.exports},"7d7b5":function(t,e,a){"use strict";var n=a("484e"),s=a.n(n);s.a},"7eba":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"config"},[a("tabContainer",{attrs:{data:t.data}},[a("el-tab-pane",{attrs:{label:"数据"}},[a("dataContainer",{attrs:{data:t.data}},[a("chartContainer",{attrs:{data:t.data}})],1)],1),a("el-tab-pane",{attrs:{label:"显示"}},[a("el-form",{attrs:{"label-width":"80px"}},[a("el-form-item",{attrs:{label:""}},[a("el-radio-group",{model:{value:t.styles.multiple,callback:function(e){t.$set(t.styles,"multiple",e)},expression:"styles.multiple"}},[a("el-radio",{attrs:{label:!1}},[t._v("单选")]),a("el-radio",{attrs:{label:!0}},[t._v("多选")])],1)],1),a("el-form-item",{attrs:{label:"标题"}},[a("el-input",{attrs:{placeholder:"请输入标题"},model:{value:t.styles.label.text,callback:function(e){t.$set(t.styles.label,"text",e)},expression:"styles.label.text"}})],1),a("el-form-item",{attrs:{label:"名称属性"}},[a("el-select",{attrs:{"value-key":"label","popper-append-to-body":!1},model:{value:t.styles.columnName,callback:function(e){t.$set(t.styles,"columnName",e)},expression:"styles.columnName"}},t._l(t.list,function(t,e){return a("el-option",{key:e,attrs:{value:t,label:t.label}})}),1)],1),a("el-form-item",{attrs:{label:"传值属性"}},[a("el-select",{attrs:{"value-key":"column",disabled:t.columnValDisabled,"popper-append-to-body":!1},model:{value:t.styles.columnVal,callback:function(e){t.$set(t.styles,"columnVal",e)},expression:"styles.columnVal"}},t._l(t.list,function(t,e){return a("el-option",{key:e,attrs:{value:t,label:t.label}})}),1)],1),[a("ul",{staticClass:"axis"},[a("li",{class:{active:"same"===t.indexType},on:{click:function(e){t.indexType="same"}}},[t._v("同源关联")]),a("li",{class:{active:"diff"===t.indexType},on:{click:function(e){t.indexType="diff"}}},[t._v("非同源关联")])]),a("div",{staticClass:"axis-container"},t._l(t.filterCompList,function(e,n){return a("div",{key:n+t.indexType,staticClass:"compSearch"},[a("el-checkbox",{attrs:{checked:!!t.styles.map[e.i]},on:{change:function(a){return t.checkedChange(e.i)}}},[t._v(t._s(e.styles.label.text))]),void 0!==t.styles.map[e.i]?a("div",{staticClass:"dataset-container"},[a("div",{staticClass:"dataset"},[a("i",{staticClass:"iconfont icon-shujuji"}),a("span",[t._v(t._s(e.params.dataSetName))])]),a("div",{staticClass:"dataset sub"},[t.styles.map[e.i]?a("i",{class:"iconfont icon-"+t.styles.map[e.i].dataType}):t._e(),a("el-select",{attrs:{"popper-append-to-body":!1,placeholder:"请选择映射属性","value-key":"label"},model:{value:t.styles.map[e.i],callback:function(a){t.$set(t.styles.map,e.i,a)},expression:"styles.map[item.i]"}},t._l(t.getList(e),function(t,e){return a("el-option",{key:e,attrs:{value:t,label:t.label}})}),1)],1)]):t._e()],1)}),0)]],2)],1)],1)],1)},s=[],i=(a("ac6a"),a("768b")),r=a("0c0e"),l=a("29c3"),o=a("db77"),c={name:"SelectConfig",components:{tabContainer:r["a"],dataContainer:l["a"],chartContainer:o["a"]},props:{data:{type:Object,default:function(){return{}}}},data:function(){return{styles:this.data.styles,indexType:"same",columnValDisabled:!1}},computed:{list:function(){var t=this.data.params.dimensions||[],e=Object(i["a"])(t,1);this.styles.columnName=e[0];var a=Object(i["a"])(t,1);return this.styles.columnVal=a[0],t},filterCompList:function(){var t=this.$store.state.panel.compList,e=[],a=[];return this.getSameDiffList(t,e,a),"same"===this.indexType?e:a}},watch:{"styles.columnName":{handler:function(t){t&&"metric"===t.dmType?(this.styles.columnVal=t,this.columnValDisabled=!0,this.styles.multiple=!1):this.columnValDisabled=!1}}},methods:{checkedChange:function(t){void 0===this.styles.map[t]?this.$set(this.styles.map,t,null):(this.$set(this.styles.map,t,void 0),delete this.styles.map[t])},getList:function(t){return t.params.rows?t.params.rows.concat(t.params.columns):t.params.dimensions?t.params.dimensions.concat(t.params.metrics):[]},getSameDiffList:function(t,e,a){var n=this;t.forEach(function(t){if("Search"!==t.type&&"Tab"!==t.type){var s=t.params,i=s.dataSetId,r=s.dataSetType;i&&r&&n.data.params.dataSetId&&n.data.params.dataSetType&&(i===n.data.params.dataSetId&&r===n.data.params.dataSetType?e.push(t):a.push(t))}else"Tab"===t.type&&t.styles.tabList.forEach(function(t){n.getSameDiffList(t.compList||[],e,a)})})}}},u=c,d=(a("ca95"),a("2877")),p=Object(d["a"])(u,n,s,!1,null,"371af1bf",null);e["default"]=p.exports},"8bf1":function(t,e,a){"use strict";var n=a("7531"),s=a.n(n);s.a},"8d0e":function(t,e,a){},"8e16":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"date"},[a("span",{staticClass:"name"},[t._v(t._s(t.data.styles.label.text))]),a("el-date-picker",{attrs:{type:t.data.styles.type,"value-format":"yyyy-MM-dd",format:"yyyy-MM-dd","picker-options":t.options,placeholder:"选择日期"},model:{value:t.data.styles.value,callback:function(e){t.$set(t.data.styles,"value",e)},expression:"data.styles.value"}}),t._t("default")],2)},s=[],i=(a("ac6a"),{name:"DateComp",props:{data:{type:Object,default:function(){return{}}}},watch:{"data.styles.time":{handler:function(){this.init()},deep:!0},"data.styles.map":{handler:function(){this.noMapWatch=!0},deep:!0},"$store.state.panel.compList":{handler:function(t){!this.noMapWatch&&this.data.styles.columnVal?this.setMap(t):delete this.noMapWatch},deep:!0}},created:function(){this.noMapWatch=!0,this.init(),this.options={shortcuts:[{text:"今天",onClick:function(t){t.$emit("pick",new Date)}},{text:"昨天",onClick:function(t){var e=new Date;e.setTime(e.getTime()-864e5),t.$emit("pick",e)}},{text:"一周前",onClick:function(t){var e=new Date;e.setTime(e.getTime()-6048e5),t.$emit("pick",e)}},{text:"一个月前",onClick:function(t){var e=new Date;e.setTime(e.getTime()-2592e6),t.$emit("pick",e)}},{text:"半年前",onClick:function(t){var e=new Date;e.setTime(e.getTime()-15552e6),t.$emit("pick",e)}}]}},methods:{init:function(){var t=this.data.styles,e=t.time;if(e.show){var a=1e3*e.unit*e.value,n=new Date;"pre"===e.position?(a=n.getTime()-a,t.value=[this.formatDateTime(a),this.formatDateTime()]):(a=n.getTime()+a,t.value=[this.formatDateTime(),this.formatDateTime(a)])}},formatDateTime:function(t){var e=t?new Date(t):new Date,a=e.getFullYear(),n=e.getMonth()+1;n=n<10?"0".concat(n):n;var s=e.getDate();return s=s<10?"0".concat(s):s,"".concat(a,"-").concat(n,"-").concat(s)},setMap:function(t){var e=this,a=[];this.getDiffList(t,a);var n={};a.forEach(function(t){var a=t.i;e.data.styles.map[a]&&(n[a]=e.data.styles.map[a])}),this.data.styles.map=n},getDiffList:function(t,e){var a=this;t.forEach(function(t){if("Search"!==t.type&&"Tab"!==t.type){var n=t.params,s=n.dataSetId,i=n.dataSetType;s&&i&&e.push(t)}else"Tab"===t.type&&t.styles.tabList.forEach(function(t){a.getDiffList(t.compList||[],e)})})}}}),r=i,l=(a("03f9"),a("2877")),o=Object(l["a"])(r,n,s,!1,null,"d15f6776",null);e["default"]=o.exports},"8e81":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"config"},[a("tabContainer",{attrs:{data:t.data}},[a("el-tab-pane",{attrs:{label:"数据"}},[a("dataContainer",{attrs:{data:t.data}},[a("chartContainer",{attrs:{data:t.data}})],1)],1),a("el-tab-pane",{attrs:{label:"显示"}},[a("el-form",{attrs:{"label-position":"right","label-width":"80px"}},[a("div",{staticClass:"title"},[t._v("基础信息")]),a("el-form",{attrs:{"label-width":"50px"}},[[a("el-form-item",{attrs:{label:"标题"}},[a("el-input",{attrs:{placeholder:"请输入标题"},model:{value:t.styles.label.text,callback:function(e){t.$set(t.styles.label,"text",e)},expression:"styles.label.text"}})],1),a("el-form-item",{attrs:{label:"备注"}},[a("el-input",{attrs:{placeholder:"请输入备注"},model:{value:t.styles.label.subText,callback:function(e){t.$set(t.styles.label,"subText",e)},expression:"styles.label.subText"}})],1)]],2)],1)],1)],1)],1)},s=[],i=a("0c0e"),r=a("29c3"),l=a("db77"),o={name:"LabelConfig",components:{tabContainer:i["a"],dataContainer:r["a"],chartContainer:l["a"]},props:{data:{type:Object,default:function(){return{}}}},data:function(){return{styles:this.data.styles}}},c=o,u=(a("9303"),a("2877")),d=Object(u["a"])(c,n,s,!1,null,"3583d31d",null);e["default"]=d.exports},"8eb1":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"config"},[a("tabContainer",{attrs:{data:t.data}},[a("el-tab-pane",{attrs:{label:"数据"}},[a("dataContainer",{attrs:{data:t.data}},[a("chartContainer",{attrs:{data:t.data}})],1)],1),a("el-tab-pane",{attrs:{label:"显示"}},[a("showContainer",{attrs:{data:t.data}})],1)],1)],1)},s=[],i=a("0c0e"),r=a("29c3"),l=a("0dfd"),o=a("db77"),c={name:"CombConfig",components:{tabContainer:i["a"],dataContainer:r["a"],chartContainer:o["a"],showContainer:l["a"]},props:{data:{type:Object,default:function(){return{}}}}},u=c,d=(a("ed52"),a("2877")),p=Object(d["a"])(u,n,s,!1,null,"035ab04e",null);e["default"]=p.exports},"917f":function(t,e,a){"use strict";var n=a("c7cd"),s=a.n(n);s.a},9303:function(t,e,a){"use strict";var n=a("34ff"),s=a.n(n);s.a},9553:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Chart",{attrs:{data:t.data},on:{apply:t.applyChart}},[t._t("default")],2)},s=[],i=(a("6762"),a("2fdb"),a("7514"),a("7f7f"),a("ac6a"),a("e61b")),r=a("ed08"),l={name:"LineComp",components:{Chart:i["a"]},props:{data:{type:Object,default:function(){return{}}}},methods:{applyChart:function(t){var e=t.res,a=t.chartData,n=t.myChart;this.exportData=e;var s=e.result;this.myChart=n;var i=a.styles,l=i.xAxis,o=i.yAxis,c=i.legend,u=i.labelNormal,d=i.lineParams;i.tooltip.formatter=function(t){var e=[];if(t.forEach(function(t){var n=t.seriesName,s=t.value,i=t.name,r=t.marker,l=a.params.metrics.find(function(t){return t.label===n}),o=l.formatThousand,c=l.formatType,u=l.formatNum;e.push({seriesName:n,value:s,name:i,marker:r,formatThousand:o,formatType:c,formatNum:u})}),0===e.length)return null;var n="".concat(e[0].name,"<br/>");return e.forEach(function(t){var e=t.seriesName,a=t.value,s=t.marker,i=t.formatThousand,l=t.formatType,o=t.formatNum,c=("percent"===l?100*a:a).toFixed(o);c=i?Object(r["a"])(c):c,c="percent"===l?"".concat(c,"%"):c,n+="".concat(s+e,": ").concat(c,"<br/>")}),n};var p=d.smooth,f=d.stack,m=d.areaStyle,h=null,b=null,y={},v=[];l[0].select.forEach(function(t,e){0===e?h=t.column:b=t.column}),[0,1].forEach(function(t){o[t].select.forEach(function(e){v.push({yAxisIndex:t,label:e.label,column:e.aggregate?"".concat(e.aggregate.toUpperCase(),"(").concat(e.column,")"):e.column||e.expression})})}),l[0].data=[],c.data=[];var g={};i.series=[],s.forEach(function(t){t[h]&&!l[0].data.includes(t[h])&&l[0].data.push(t[h]),y[t[h]]=y[t[h]]||{};var e=y[t[h]];v.forEach(function(a){var n=(b?"".concat(t[b],"-"):"")+a.label;e[n]=t[a.column];var s={name:n,yAxisIndex:a.yAxisIndex};g[n]||(g[n]=!0,c.data.push(s))})}),c.data.forEach(function(t){var e=t.name,n=t.yAxisIndex,s=[];l[0].data.forEach(function(t){s.push(y[t][e])}),i.series.push({name:e,yAxisIndex:n,type:"line",smooth:p,stack:f,areaStyle:m,label:{normal:Object.assign(u,{formatter:function(t){var e=t.seriesName,n=t.value,s=a.params.metrics.find(function(t){return t.label===e}),i=s.formatThousand,l=s.formatNum,o=s.formatType,c=("percent"===o?100*n:n).toFixed(l);return c=i?Object(r["a"])(c):c,c="percent"===o?"".concat(c,"%"):c,c}})},data:s})}),this.myChart.resize(),this.myChart.setOption(i,!0)},resize:function(){this.myChart&&this.myChart.resize()}}},o=l,c=a("2877"),u=Object(c["a"])(o,n,s,!1,null,null,null);e["default"]=u.exports},9986:function(t,e,a){"use strict";var n=a("358d"),s=a.n(n);s.a},"9bea":function(t,e,a){"use strict";var n=a("d8bc"),s=a.n(n);s.a},a133:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"select"},[a("span",{staticClass:"name"},[t._v(t._s(t.data.styles.label.text))]),a("el-select",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],key:t.data.styles.multiple,attrs:{clearable:"",multiple:t.data.styles.multiple,placeholder:"请选择"},model:{value:t.data.styles.value,callback:function(e){t.$set(t.data.styles,"value",e)},expression:"data.styles.value"}},t._l(t.options,function(t,e){return a("el-option",{key:t.value+e,attrs:{label:t.label,value:t.value}})}),1),t._t("default")],2)},s=[],i=(a("456d"),a("ac6a"),a("caf0")),r=a("b5ec"),l=[">","<",">=","<=","!=","="],o={name:"SelectComp",components:{propertyChart:r["a"]},props:{data:{type:Object,default:function(){return{}}}},data:function(){return{loading:!1,selectList:[],selectVal:"> 20 且 < 10",form:{valList:[],logical:"and"}}},computed:{isMetric:function(){var t=this.data.styles.columnName;return t&&"metric"===t.dmType},options:function(){var t=this.data.styles,e=t.columnName,a=t.columnVal,n=[];return this.selectList.forEach(function(t){n.push({label:t[e.column],value:t[a.column]})}),n}},watch:{"data.styles.map":{handler:function(){this.noMapWatch=!0},deep:!0},"$store.state.panel.compList":{handler:function(t){!this.noMapWatch&&this.data.styles.columnVal?this.setMap(t):delete this.noMapWatch},deep:!0}},created:function(){var t=this;this.getOpeList=l,this.preView=this.$store.state.panel.preView,this.$store._vm.$on("".concat(this.data.i,"update").concat(this.preView),function(){t.queryChartData()}),this.init(),this.noMapWatch=!0},destroyed:function(){this.$store._vm.$off("".concat(this.data.i,"update").concat(this.preView))},methods:{init:function(){Object.keys(this.data.params).length>0&&this.queryChartData()},queryChartData:function(){var t=this;this.loading=!0;var e=this.data,a=e.params,n=e.type,s=e.i,r=this.$route.params,l=r.id,o=r.state;Object(i["d"])({params:a,extra:this.extra,compQuery:{compId:s,dashBoardId:"create"===l?null:l,dashBoardStage:"online"===o?3:null}},n).then(function(e){t.selectList=e.result||[]}).finally(function(){t.loading=!1})},setMap:function(t){var e=this,a=[],n=[];this.getSameDiffList(t,a,n);var s={};a.forEach(function(t){var a=e.getActiveObj(t,e.data.styles.columnVal);e.data.styles.map[t.i]?s[t.i]=e.data.styles.map[t.i]:a&&(s[t.i]=a)}),n.forEach(function(t){var a=t.i;e.data.styles.map[a]&&(s[a]=e.data.styles.map[a])}),this.data.styles.map=s},getSameDiffList:function(t,e,a){var n=this;t.forEach(function(t){if("Search"!==t.type&&"Tab"!==t.type){var s=t.params,i=s.dataSetId,r=s.dataSetType;i&&r&&n.data.params.dataSetId&&n.data.params.dataSetType&&(i===n.data.params.dataSetId&&r===n.data.params.dataSetType?e.push(t):a.push(t))}else"Tab"===t.type&&t.styles.tabList.forEach(function(t){n.getSameDiffList(t.compList||[],e,a)})})},getActiveObj:function(t,e){for(var a=e.column,n=this.getList(t),s=0,i=n.length;s<i;s+=1)if(n[s].column===a)return n[s];return null},getList:function(t){return t.params.rows?t.params.rows.concat(t.params.columns):t.params.dimensions?t.params.dimensions.concat(t.params.metrics):[]},addFilter:function(){this.form.valList.push({operate:"=",value:this.options[0]?this.options[0].label:1})}}},c=o,u=(a("16e7"),a("2877")),d=Object(u["a"])(c,n,s,!1,null,"087c05e3",null);e["default"]=d.exports},a2ef:function(t,e,a){},ae30:function(t,e,a){},b08f:function(t,e,a){"use strict";var n=a("11ce"),s=a.n(n);s.a},b122:function(t,e,a){"use strict";a.d(e,"n",function(){return r}),a.d(e,"c",function(){return l}),a.d(e,"f",function(){return o}),a.d(e,"m",function(){return c}),a.d(e,"p",function(){return u}),a.d(e,"b",function(){return d}),a.d(e,"e",function(){return p}),a.d(e,"k",function(){return f}),a.d(e,"h",function(){return m}),a.d(e,"o",function(){return h}),a.d(e,"j",function(){return b}),a.d(e,"d",function(){return y}),a.d(e,"i",function(){return v}),a.d(e,"g",function(){return g}),a.d(e,"l",function(){return x}),a.d(e,"y",function(){return k}),a.d(e,"z",function(){return C}),a.d(e,"a",function(){return w}),a.d(e,"q",function(){return S}),a.d(e,"s",function(){return _}),a.d(e,"r",function(){return T}),a.d(e,"v",function(){return $}),a.d(e,"B",function(){return L}),a.d(e,"A",function(){return j}),a.d(e,"w",function(){return O}),a.d(e,"u",function(){return D}),a.d(e,"t",function(){return E}),a.d(e,"x",function(){return A});var n=a("bed7"),s=a("2056"),i=s["a"].SPACE_API;function r(){return n["a"].get("".concat(i,"/api/v1/project/projects")).then(function(t){return t.data})}function l(t){return t.id?n["a"].put("".concat(i,"/api/v1/project"),t).then(function(t){return t.data}):n["a"].post("".concat(i,"/api/v1/project"),t).then(function(t){return t.data})}function o(t){return n["a"].delete("".concat(i,"/api/v1/project?id=").concat(t.id),{}).then(function(t){return t.data})}function c(t){return n["a"].post("".concat(i,"/api/v1/directory/all"),t).then(function(t){return t.data})}function u(t){return n["a"].get("".concat(i,"/api/v1/directory/treeInProject"),{params:t}).then(function(t){return t.data})}function d(t){return t.id?n["a"].put("".concat(i,"/api/v1/directory"),t).then(function(t){return t.data}):n["a"].post("".concat(i,"/api/v1/directory"),t).then(function(t){return t.data})}function p(t){return n["a"].delete("".concat(i,"/api/v1/directory?id=").concat(t.id),{}).then(function(t){return t.data})}function f(t){return n["a"].get("".concat(i,"/api/v1/dataSource/queryProjectRelated"),{params:t}).then(function(t){return t.data})}function m(t){return n["a"].post("".concat(i,"/api/v1/dataSource/executeSql"),t).then(function(t){return t.data})}function h(t){return n["a"].post("".concat(i,"/api/v1/dataSource/loadColumns"),t).then(function(t){return t.data})}function b(t){return n["a"].get("".concat(i,"/api/v1/dataSet/detail"),{params:t}).then(function(t){return t.data})}function y(t){return n["a"].delete("".concat(i,"/api/v1/dataSet?id=").concat(t.id,"&type=").concat(t.type),{}).then(function(t){return t.data})}function v(t){return n["a"].get("".concat(i,"/api/v1/dataSet"),{params:t}).then(function(t){return t.data})}function g(t){return n["a"].put("".concat(i,"/api/v1/dataSet"),t).then(function(t){return t.data})}function x(t){return n["a"].get("".concat(i,"/api/v1/dataSource/queryProjectRelated"),{params:t}).then(function(t){return t.data})}function k(t){var e=t.dataSet.baseSql?"sql":"es";return n["a"].post("".concat(i,"/api/v1/dataSet/").concat(e),t).then(function(t){return t.data})}function C(t){return n["a"].post("".concat(i,"/api/v1/dataSet/pai"),t).then(function(t){return t.data})}function w(t){return n["a"].post("".concat(i,"/api/v1/dataSet/copy"),t).then(function(t){return t.data})}function S(t){return n["a"].get("".concat(i,"/api/v1/dashboard/publishUrl/").concat(t.dataSetId)).then(function(t){return t.data})}function _(t){return"dashboard"===t.dataSetType?n["a"].post("".concat(i,"/api/v1/dashboard/upLine/").concat(t.dataSetId),t).then(function(t){return t.data}):n["a"].post("".concat(i,"/api/v1/dataSet/upLine"),t).then(function(t){return t.data})}function T(t){return"dashboard"===t.dataSetType?n["a"].post("".concat(i,"/api/v1/dashboard/downLine/").concat(t.dataSetId),t).then(function(t){return t.data}):n["a"].post("".concat(i,"/api/v1/dataSet/downLine"),t).then(function(t){return t.data})}function $(t){return n["a"].post("".concat(i,"/api/v1/dataSet/queryScheduleInfo"),t).then(function(t){return t.data})}function L(t){return n["a"].post("".concat(i,"/api/v1/dataSet/updateScheduleInfo"),t).then(function(t){return t.data})}function j(t){return n["a"].post("".concat(i,"/api/v1/dataSet/triggerRefresh"),t).then(function(t){return t.data})}function O(t){return n["a"].post("".concat(i,"/api/v1/dataSet/refreshLogs"),t).then(function(t){return t.data})}function D(t){var e={dashboardId:t};return n["a"].get("".concat(i,"/api/v1/dashboardAuth/queryDashBoardAuthDef"),{params:e}).then(function(t){return t.data})}function E(t){var e={dashboardId:t};return n["a"].get("".concat(i,"/api/v1/dashboardAuth/queryDashBoardAuth"),{params:e}).then(function(t){return t.data})}function A(t){return n["a"].post("".concat(i,"/api/v1/dashboardAuth/saveDashBoardAuth"),t).then(function(t){return t.data})}},b38e:function(t,e,a){"use strict";var n=a("cc5e"),s=a.n(n);s.a},b5ec:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.dataList.length>0?a("div",{staticClass:"property-chart"},[1==t.dataList.length?a("div",[t.dataList[0][t.typeName]?t._t(t.dataList[0][t.typeName],null,{item:t.dataList[0],index:0,length:t.dataList.length}):t._t("default",null,{item:t.dataList[0],index:0,length:t.dataList.length})],2):a("div",{staticClass:"property-list",style:{marginLeft:t.leftWidth}},t._l(t.dataList,function(e,n){return a("div",{key:n,staticClass:"list",style:{marginBottom:n===t.dataList.length-1?0:t.gap+"px"}},[0!=n?a("div",{staticClass:"border-up",style:t.upStyleObj},[a("el-button",{attrs:{type:"primary"}},[t._v(t._s(t.tag))])],1):t._e(),t._t(e[t.typeName]||"default",null,{item:e,index:n,length:t.dataList.length}),n!=t.dataList.length-1?a("div",{staticClass:"border-down",style:t.downStyleObj}):t._e()],2)}),0)]):t._e()},s=[],i=(a("c5f6"),{name:"PropertyChart",props:{typeName:{type:String,default:"typeName"},gap:{type:Number,default:16},tag:{type:String,default:"且"},color:{type:String,default:"#337ab7"},width:{type:String,default:"50px"},dataList:{type:Array,default:function(){return[]}}},data:function(){return{leftWidth:"calc(10px + ".concat(this.width,")"),styleObj:{borderColor:this.color,width:this.width,left:"-".concat(this.width),height:"calc(50% + ".concat(this.gap/2-2,"px)")}}},computed:{upStyleObj:function(){return Object.assign({},this.styleObj,{top:"-".concat(this.gap/2,"px")})},downStyleObj:function(){return Object.assign({},this.styleObj,{top:"calc(50% + 2px)"})}}}),r=i,l=(a("d5da"),a("2877")),o=Object(l["a"])(r,n,s,!1,null,"54dcf51c",null);e["a"]=o.exports},bd2f:function(t,e,a){},bd9a:function(t,e,a){"use strict";var n=a("a2ef"),s=a.n(n);s.a},bed7:function(t,e,a){"use strict";var n=a("bc3a"),s=a.n(n),i=a("1211"),r=a.n(i);a("456d"),a("ac6a");function l(t){return t?(Object.keys(t).forEach(function(e){null!==t[e]&&void 0!==t[e]&&""!==t[e]||delete t[e]}),t):{}}var o=a("d225"),c=a("308d"),u=a("6bb5"),d=a("4e2b"),p=a("f28b"),f=a("5c96"),m=4e3,h={404:"请求地址错误或后端接口未部署",403:"没有相关权限",401:"登录状态过期, 需要重新登录",500:"后端服务有未处理的错误",502:"后端接口无响应",504:"请求超时, 可能是网络问题, 请稍后重试"},b=function(t){function e(t,a,n){var s;return Object(o["a"])(this,e),s=Object(c["a"])(this,Object(u["a"])(e).call(this,t)),s.name="HttpBizError",s.request=a,s.response=n,s}return Object(d["a"])(e,t),e}(Object(p["a"])(Error)),y=function(t){function e(t){var a;return Object(o["a"])(this,e),a=Object(c["a"])(this,Object(u["a"])(e).call(this,t)),a.name="HttpNetworkError",a}return Object(d["a"])(e,t),e}(Object(p["a"])(Error));function v(t,e){if(e){var a=t.status,n="网络请求错误";throw f["Notification"].error({title:n,message:h[a],duration:m}),401===a&&r.a.signOut(),new y(n)}var s=t.config,i=t.data,l=void 0===i?{}:i,o=t.request,c="后端接口报错";throw s.noGlobalMessage||f["Notification"].error({title:c,message:l.message||l.info||l.msg||"后端没有返回错误信息",duration:m}),new b(c,o,l)}var g=v;window.cancelTokenList=[];var x=s.a.create({timeout:15e4});x.interceptors.request.use(function(t){t.headers.token=r.a.token,l(t.data||t.params||{});var e=s.a.CancelToken.source();return window.cancelTokenList.push(e),t.cancelToken=e.token,t},function(t){Promise.reject(t)}),x.interceptors.response.use(function(t){window.cancelTokenList=window.cancelTokenList.filter(function(e){return e.token!==t.config.cancelToken});var e=t&&t.data;return 0===e.code&&(e.status=1),1!==e.status&&g(t),e},function(t){g(t.response,!0)});e["a"]=x},c21a:function(t,e,a){},c2d3:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"label"},[1===t.label.length||3===t.label.length?a("div",{staticClass:"center"},[a("div",{staticClass:"title"},[t._v(t._s(t.label[0].title))]),a("span",{staticClass:"val"},[t._v(t._s(t.label[0].value))])]):t._e(),2===t.label.length||3===t.label.length?a("div",{staticClass:"container"},[a("div",{staticClass:"left"},[a("div",{staticClass:"title"},[t._v(t._s(t.label[t.label.length-2].title))]),a("span",{staticClass:"val",style:t.colors(t.label[t.label.length-2].value)},[t._v(t._s(t.label[t.label.length-2].value))])]),a("div",{staticClass:"right"},[a("div",{staticClass:"title"},[t._v(t._s(t.label[t.label.length-1].title))]),a("span",{staticClass:"val",style:t.colors(t.label[t.label.length-1].value)},[t._v(t._s(t.label[t.label.length-1].value))])])]):t._e(),t._t("default")],2)},s=[],i=a("768b"),r=(a("ac6a"),a("456d"),a("caf0")),l=a("ed08"),o={name:"LabelComp",components:{},props:{data:{type:Object,default:function(){return{}}}},data:function(){return{loading:!1,label:[],extra:[]}},created:function(){var t=this;this.preView=this.$store.state.panel.preView,this.$store._vm.$on("".concat(this.data.i,"update").concat(this.preView),function(e){t.queryChartData(e)}),this.$store._vm.$on("".concat(this.data.i,"search").concat(this.preView),function(e){t.searchInit=!0,t.extra=e,t.queryChartData(t.data)})},destroyed:function(){this.$store._vm.$off("".concat(this.data.i,"update").concat(this.preView)),this.$store._vm.$off("".concat(this.data.i,"search").concat(this.preView))},mounted:function(){this.searchInit||this.init()},methods:{init:function(){Object.keys(this.data.params).length>0&&this.queryChartData(this.data)},applyChart:function(t,e){var a=this;this.label=[];var n=e.params.metrics,s=Object(i["a"])(t,1),r=s[0];r&&n.forEach(function(t){var e=r[t.aggregate?"".concat(t.aggregate.toUpperCase(),"(").concat(t.column,")"):t.column||t.expression];a.label.push({title:t.label,value:t.formatThousand?Object(l["a"])(e):e})})},queryChartData:function(t){var e=this;this.loading=!0;var a=t.params,n=t.type,s=t.i,i=this.$route.params,l=i.id,o=i.state;Object(r["d"])({params:a,extra:this.extra,compQuery:{compId:s,dashBoardId:"create"===l?null:l,dashBoardStage:"online"===o?3:null}},n).then(function(a){e.exportData=a,e.applyChart(a.result,t)}).finally(function(){e.loading=!1})},colors:function(t){var e="".concat(t);return e.indexOf("-")>-1?{color:"red"}:{color:"#2cda3b"}}}},c=o,u=(a("2a88"),a("2877")),d=Object(u["a"])(c,n,s,!1,null,"a8b91822",null);e["default"]=d.exports},c41b:function(t,e,a){},c67e:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tabs"},[t.data.styles.tabList.length>0?a("el-tabs",{attrs:{"tab-position":t.data.styles.tabPosition},model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},t._l(t.data.styles.tabList,function(e,n){return a("el-tab-pane",{key:n,attrs:{label:e.title,name:n+""}},[a("dragContainer",{attrs:{obj:t.data,list:e.compList}})],1)}),1):a("div",{staticClass:"no-data"},[t._v("\n    请添加Tab标签\n  ")]),t._t("default")],2)},s=[],i=a("40ee"),r={name:"TabComp",components:{dragContainer:i["a"]},props:{data:{type:Object,default:function(){return{}}}},data:function(){return{active:"0"}}},l=r,o=(a("556c"),a("2877")),c=Object(o["a"])(l,n,s,!1,null,"f30f2da2",null);e["default"]=c.exports},c6f7:function(t,e,a){},c774:function(t,e,a){},c7cd:function(t,e,a){},ca95:function(t,e,a){"use strict";var n=a("e43c"),s=a.n(n);s.a},caf0:function(t,e,a){"use strict";a.d(e,"e",function(){return r}),a.d(e,"f",function(){return l}),a.d(e,"d",function(){return o}),a.d(e,"a",function(){return c}),a.d(e,"g",function(){return u}),a.d(e,"b",function(){return d}),a.d(e,"c",function(){return p});var n=a("bed7"),s=a("2056"),i=s["a"].SPACE_API;function r(t){return n["a"].post("".concat(i,"/api/v1/dataSet/queryOnline"),t).then(function(t){return t.data})}function l(t){return n["a"].post("".concat(i,"/api/v1/column/queryOnline"),t).then(function(t){return t.data})}function o(t,e){return n["a"].post("".concat(i,"/api/v1/chart/queryChartData/").concat(e),t).then(function(t){return t.data})}function c(t){return n["a"].get("".concat(i,"/api/v1/dashboard/").concat(t)).then(function(t){return t.data})}function u(t){return n["a"].post("".concat(i,"/api/v1/dashboard"),t).then(function(t){return t.data})}function d(t){return n["a"].delete("".concat(i,"/api/v1/dashboard/").concat(t)).then(function(t){return t.data})}function p(t,e){return n["a"].get("".concat(i,"/api/v1/refreshJob/state/").concat(e,"/").concat(t)).then(function(t){return t.data})}},cc5e:function(t,e,a){},cd02:function(t,e,a){"use strict";var n=a("c41b"),s=a.n(n);s.a},d032:function(t,e,a){"use strict";a("456d"),a("ac6a");var n=a("7618"),s=function t(e){if(null===e||"object"!==Object(n["a"])(e))return e;if("isActiveClone"in e)throw new Error("循环引用警告⚠️");var a;return a=e instanceof Date?new e.constructor:e.constructor(),Object.keys(e).forEach(function(n){e.isActiveClone=null,a[n]=t(e[n]),delete e.isActiveClone}),a};e["a"]=s},d5b3:function(t,e,a){"use strict";var n=a("5ff7"),s=a.n(n);s.a},d5da:function(t,e,a){"use strict";var n=a("e003"),s=a.n(n);s.a},d620:function(t,e,a){"use strict";var n=a("8d0e"),s=a.n(n);s.a},d8bc:function(t,e,a){},dad6:function(t,e,a){"use strict";var n=a("381e"),s=a.n(n);s.a},db77:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"chart"},[a("chartXYW",{attrs:{data:t.copyData,showItem:t.showItem}}),a("div",{staticClass:"utils"},[a("span",[t._v("行数")]),a("el-input",{attrs:{type:"number",min:1},model:{value:t.copyData.params.pageSize,callback:function(e){t.$set(t.copyData.params,"pageSize",e)},expression:"copyData.params.pageSize"}})],1),a("div",{staticClass:"btn-apply"},[a("el-button",{attrs:{type:"primary"},on:{click:t.apply}},[t._v("更新")])],1)],1)},s=[],i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"chartXYW"},[t.showItem.includes("r")?a("div",{staticClass:"rows"},[a("span",[t._v("行\n      "),a("div",{on:{click:function(e){return t.customType("rows")}}},[a("i",{staticClass:"iconfont icon-plus"}),t._v("自定义\n      ")])]),a("ul",{class:{active:"r"===t.typeActive},on:{dragover:function(e){return e.preventDefault(),e.stopPropagation(),function(){t.typeActive="r"}()},dragleave:function(e){return e.stopPropagation(),function(){t.typeActive=null}()},drop:function(e){return e.stopPropagation(),function(e){t.drop(e,"r"),t.typeActive=null}(e)}}},[0===t.rows.length?a("li",{staticClass:"row-li no"},[a("el-input",{attrs:{placeholder:"拖动右侧维度/度量添加",readonly:""}})],1):a("draggable",{attrs:{list:t.rows}},t._l(t.rows,function(e,n){return a("li",{key:n,staticClass:"row-li",on:{mousedown:function(a){return t.mousedown(e,n,"r")}}},[a("el-input",{attrs:{"prefix-icon":"iconfont icon-"+e.dataType,readonly:""},model:{value:e.label,callback:function(a){t.$set(e,"label",a)},expression:"item.label"}},["dimension"!==e.dmType?a("i",{staticClass:"el-icon-edit",attrs:{slot:"suffix"},on:{click:function(a){return t.editDimension(e,n,"y","rows")}},slot:"suffix"}):t._e(),a("i",{staticClass:"iconfont icon-shanchu-copy-copy",attrs:{slot:"suffix"},on:{click:function(a){return t.tableDel(t.rows,n,e)}},slot:"suffix"})])],1)}),0)],1)]):t._e(),t.showItem.includes("c")?a("div",{staticClass:"rows"},[a("span",[t._v("列\n      "),a("div",{on:{click:function(e){return t.customType("columns")}}},[a("i",{staticClass:"iconfont icon-plus"}),t._v("自定义\n      ")])]),a("ul",{class:{active:"c"===t.typeActive},on:{dragover:function(e){return e.preventDefault(),e.stopPropagation(),function(){t.typeActive="c"}()},dragleave:function(e){return e.stopPropagation(),function(){t.typeActive=null}()},drop:function(e){return e.stopPropagation(),function(e){t.drop(e,"c"),t.typeActive=null}(e)}}},[0===t.columns.length?a("li",{staticClass:"row-li no"},[a("el-input",{attrs:{placeholder:"拖动右侧维度/度量添加",readonly:""}})],1):a("draggable",{attrs:{list:t.columns}},t._l(t.columns,function(e,n){return a("li",{key:n,staticClass:"row-li",on:{mousedown:function(a){return t.mousedown(e,n,"c")}}},[a("el-input",{attrs:{"prefix-icon":"iconfont icon-"+e.dataType,readonly:""},model:{value:e.label,callback:function(a){t.$set(e,"label",a)},expression:"item.label"}},["dimension"!==e.dmType?a("i",{staticClass:"el-icon-edit",attrs:{slot:"suffix"},on:{click:function(a){return t.editDimension(e,n,"y","columns")}},slot:"suffix"}):t._e(),a("i",{staticClass:"iconfont icon-shanchu-copy-copy",attrs:{slot:"suffix"},on:{click:function(a){return t.tableDel(t.columns,n,e)}},slot:"suffix"})])],1)}),0)],1)]):t._e(),t.showItem.includes("x")?a("div",{staticClass:"rows"},[a("span",[t._v(t._s("Select"===t.data.type?"筛选列":"类别轴/维度"))]),a("ul",{class:{active:"x"===t.typeActive},on:{dragover:function(e){return e.preventDefault(),e.stopPropagation(),function(){t.typeActive="x"}()},dragleave:function(e){return e.stopPropagation(),function(){t.typeActive=null}()},drop:function(e){return e.stopPropagation(),function(e){t.drop(e,"x"),t.typeActive=null}(e)}}},[0===t.dimensions.length?a("li",{staticClass:"row-li no"},[a("el-input",{attrs:{placeholder:"拖动右侧"+("Select"===t.data.type?"维度/度量":"维度")+"添加",readonly:""}})],1):a("draggable",{attrs:{list:t.dimensions}},t._l(t.dimensions,function(e,n){return a("li",{key:n+"x",staticClass:"row-li"},[a("el-input",{attrs:{"prefix-icon":"iconfont icon-"+e.dataType,readonly:""},model:{value:e.label,callback:function(a){t.$set(e,"label",a)},expression:"item.label"}},[a("i",{staticClass:"iconfont icon-shanchu-copy-copy",attrs:{slot:"suffix"},on:{click:function(a){return t.delType(t.dimensions,n,"x",e)}},slot:"suffix"})])],1)}),0)],1)]):t._e(),t.showItem.includes("y")?a("div",{staticClass:"rows"},[a("span",[t._v("值轴/度量\n      "),a("div",{on:{click:t.customType}},[a("i",{staticClass:"iconfont icon-plus"}),t._v("自定义\n      ")])]),a("ul",{class:{active:"y"===t.typeActive},on:{dragover:function(e){return e.preventDefault(),e.stopPropagation(),function(){t.typeActive="y"}()},dragleave:function(e){return e.stopPropagation(),function(){t.typeActive=null}()},drop:function(e){return e.stopPropagation(),function(e){t.drop(e,"y"),t.typeActive=null}(e)}}},[0===t.metrics.length?a("li",{staticClass:"row-li no"},[a("el-input",{attrs:{placeholder:"拖动右侧维度/度量添加",readonly:""}})],1):a("draggable",{attrs:{list:t.metrics}},t._l(t.metrics,function(e,n){return a("li",{key:n+"y",staticClass:"row-li"},[a("el-input",{attrs:{"prefix-icon":"iconfont icon-"+e.dataType,value:e.label,readonly:""}},[a("i",{staticClass:"el-icon-edit",attrs:{slot:"suffix"},on:{click:function(a){return t.editDimension(e,n,"y")}},slot:"suffix"}),a("i",{staticClass:"iconfont icon-shanchu-copy-copy",attrs:{slot:"suffix"},on:{click:function(a){return t.delType(t.metrics,n,"y",e)}},slot:"suffix"})])],1)}),0)],1)]):t._e(),t.showItem.includes("w")?a("div",{staticClass:"rows"},[a("span",[t._v("过滤条件")]),a("ul",{class:{active:"w"===t.typeActive},on:{dragover:function(e){return e.preventDefault(),e.stopPropagation(),function(){t.typeActive="w"}()},dragleave:function(e){return e.stopPropagation(),function(){t.typeActive=null}()},drop:function(e){return e.stopPropagation(),function(e){t.drop(e,"w"),t.typeActive=null}(e)}}},[0===t.filters.length?a("li",{staticClass:"row-li no"},[a("el-input",{attrs:{placeholder:"拖动右侧维度/度量添加",readonly:""}})],1):a("draggable",{attrs:{list:t.filters}},t._l(t.filters,function(e,n){return a("li",{key:n+"w",staticClass:"row-li"},[a("el-input",{attrs:{"prefix-icon":"iconfont icon-"+e.dataType,readonly:""},model:{value:e.label,callback:function(a){t.$set(e,"label",a)},expression:"item.label"}},[a("i",{staticClass:"el-icon-edit",attrs:{slot:"suffix"},on:{click:function(a){return t.editDimension(e,n,"w")}},slot:"suffix"}),a("i",{staticClass:"iconfont icon-shanchu-copy-copy",attrs:{slot:"suffix"},on:{click:function(a){return t.delType(t.filters,n,"w",e)}},slot:"suffix"})])],1)}),0)],1)]):t._e(),t.showItem.includes("s")?a("div",{staticClass:"rows"},[a("span",[t._v("排序\n      "),a("div",{on:{click:t.addSort}},[a("i",{staticClass:"iconfont icon-plus"}),t._v("添加\n      ")])]),t._l(t.sortBy,function(e,n){return a("div",{key:n,staticClass:"parent"},[a("el-select",{staticClass:"sort",attrs:{placeholder:"请选择","popper-append-to-body":!1},model:{value:e.column,callback:function(a){t.$set(e,"column",a)},expression:"obj.column"}},t._l(t.sortList,function(t,e){return a("el-option",{key:e,attrs:{label:t.label,value:t.column,disabled:t.disabled}})}),1),a("i",{staticClass:"el-icon-sort-down",class:{active:!e.asc},attrs:{title:e.asc?"升":"降"},on:{click:function(t){e.asc=!e.asc}}}),a("i",{staticClass:"el-icon-sort-up",class:{active:e.asc},attrs:{title:e.asc?"升":"降"},on:{click:function(t){e.asc=!e.asc}}}),a("i",{staticClass:"el-icon-delete",on:{click:function(e){return t.delSort(n)}}})],1)})],2):t._e(),t.dialogVisible?a("chartDialog",{attrs:{obj:t.dialogObj,type:t.dialogType,visible:t.dialogVisible},on:{close:function(e){t.dialogVisible=!1},save:t.dialogSave}}):t._e()],1)},r=[],l=a("768b"),o=(a("28a5"),a("7f7f"),a("456d"),a("ffc1"),a("ac6a"),a("310e")),c=a.n(o),u=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{visible:t.visible,"close-on-click-modal":!1,"before-close":function(){t.$emit("close")},title:t.title,width:"40%","append-to-body":""},on:{"update:visible":function(e){t.visible=e}}},[a("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules,"label-width":"100px"}},["y"===t.type?["custom"===t.form.type?[a("el-form-item",{attrs:{label:"度量名称",prop:"label"}},[a("el-input",{attrs:{placeholder:"请输入度量名称"},model:{value:t.form.label,callback:function(e){t.$set(t.form,"label",e)},expression:"form.label"}})],1),a("el-form-item",{attrs:{label:"自定义脚本",prop:"expression"}},[a("el-input",{attrs:{placeholder:"请输入自定义脚本",type:"textarea"},model:{value:t.form.expression,callback:function(e){t.$set(t.form,"expression",e)},expression:"form.expression"}})],1)]:[a("el-form-item",{attrs:{label:"字段名称",prop:"name"}},[t._v("\n          "+t._s(t.setLabel)+"\n        ")]),a("el-form-item",{attrs:{label:"计算方式",prop:"aggregate"}},[a("el-select",{model:{value:t.form.aggregate,callback:function(e){t.$set(t.form,"aggregate",e)},expression:"form.aggregate"}},t._l(t.ySetTypeList,function(t,e){return a("el-option",{key:e,attrs:{value:t.value,label:t.label}})}),1)],1),a("el-form-item",{attrs:{prop:"formatNum",label:"格式设置"}},[a("el-select",{model:{value:t.form.formatType,callback:function(e){t.$set(t.form,"formatType",e)},expression:"form.formatType"}},[a("el-option",{attrs:{value:"number",label:"数值"}}),a("el-option",{attrs:{value:"percent",label:"百分比"}})],1),a("span",{style:{"margin-left":"10px"}},[t._v("小数位数")]),a("el-input",{style:{width:"100px","margin-left":"10px"},attrs:{min:0,max:10,type:"number"},model:{value:t.form.formatNum,callback:function(e){t.$set(t.form,"formatNum",e)},expression:"form.formatNum"}})],1)],a("el-form-item",{attrs:{label:""}},[a("el-checkbox",{model:{value:t.form.formatThousand,callback:function(e){t.$set(t.form,"formatThousand",e)},expression:"form.formatThousand"}},[t._v("显示千分符")])],1)]:t._e(),"w"===t.type?[a("el-form-item",{attrs:{label:"字段中文名称",prop:"name"}},[t._v("\n        "+t._s(t.setLabel)+"\n      ")]),"metric"===t.form.dmType?a("el-form-item",{attrs:{label:"计算方式",prop:"aggregate"}},[a("el-select",{model:{value:t.form.aggregate,callback:function(e){t.$set(t.form,"aggregate",e)},expression:"form.aggregate"}},t._l(t.ySetTypeList,function(t,e){return a("el-option",{key:e,attrs:{value:t.value,label:t.label}})}),1)],1):t._e(),a("el-form-item",{attrs:{label:"字段英文标识",prop:"column"}},[t._v("\n        "+t._s(t.form.column)+"\n      ")]),a("el-form-item",{attrs:{label:"过滤类型"}},[a("el-radio-group",{model:{value:t.form.type,callback:function(e){t.$set(t.form,"type",e)},expression:"form.type"}},["time"===t.form.dataType?[a("el-radio-button",{attrs:{label:"absolute"}},[t._v("绝对时间")]),a("el-radio-button",{attrs:{label:"relative"}},[t._v("相对时间")])]:[a("el-radio-button",{attrs:{label:"condition"}},[t._v("条件")]),a("el-radio-button",{attrs:{label:"enum"}},[t._v("枚举")])],a("el-radio-button",{attrs:{label:"custom"}},[t._v("自定义")])],2)],1),"condition"===t.form.type||"absolute"===t.form.type||"relative"===t.form.type?[a("el-form-item",{attrs:{label:""}},[a("el-radio",{attrs:{label:"and"},model:{value:t.form.tabs[t.form.type].logical,callback:function(e){t.$set(t.form.tabs[t.form.type],"logical",e)},expression:"form.tabs[form.type].logical"}},[t._v("且")]),a("el-radio",{attrs:{label:"or"},model:{value:t.form.tabs[t.form.type].logical,callback:function(e){t.$set(t.form.tabs[t.form.type],"logical",e)},expression:"form.tabs[form.type].logical"}},[t._v("或")])],1),a("el-form-item",{attrs:{label:"",prop:"name"}},[0===t.form.tabs[t.form.type].conditions.length?[a("i",{staticClass:"iconfont icon-plus",style:{color:"#409EFF","font-size":"20px","vertical-align":"bottom",cursor:"pointer"},on:{click:t.addFilter}}),a("span",[t._v(" 添加")])]:t._e(),a("propertyChart",{style:{"margin-left":"-60px"},attrs:{dataList:t.form.tabs[t.form.type].conditions,tag:"and"===t.form.tabs[t.form.type].logical?"且":"或"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-select",{style:{width:"100px"},model:{value:e.item.operator,callback:function(a){t.$set(e.item,"operator",a)},expression:"props.item.operator"}},t._l(t.getOpeList,function(t,e){return a("el-option",{key:e,attrs:{label:t.name,value:t.value}})}),1),"absolute"===t.form.type?[a("el-date-picker",{style:{width:"170px",margin:"0 10px"},attrs:{type:"datetime",format:"yyyy-MM-dd HH:mm:ss","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"请选择日期时间"},model:{value:e.item.value,callback:function(a){t.$set(e.item,"value",a)},expression:"props.item.value"}})]:"relative"===t.form.type?[a("el-select",{style:{width:"85px",margin:"0 10px"},model:{value:e.item.direction,callback:function(a){t.$set(e.item,"direction",a)},expression:"props.item.direction"}},[a("el-option",{attrs:{value:"prev",label:"当日前"}}),a("el-option",{attrs:{value:"next",label:"当日后"}})],1),a("el-input",{style:{width:"70px"},attrs:{type:"number",min:0},model:{value:e.item.value,callback:function(a){t.$set(e.item,"value",a)},expression:"props.item.value"}}),a("el-select",{style:{width:"60px",margin:"0 10px"},model:{value:e.item.unit,callback:function(a){t.$set(e.item,"unit",a)},expression:"props.item.unit"}},t._l(t.timeList,function(t,e){return a("el-option",{key:e,attrs:{value:t.value,label:t.name}})}),1)]:[a("el-input",{style:{width:"100px",margin:"0 10px"},attrs:{type:"string"===t.form.dataType?"default":"number"},model:{value:e.item.value,callback:function(a){t.$set(e.item,"value",a)},expression:"props.item.value"}})],a("i",{staticClass:"iconfont icon-shanchu-copy-copy",style:{color:"#409EFF",margin:"0 5px",cursor:"pointer","vertical-align":"bottom"},on:{click:function(){t.form.tabs[t.form.type].conditions.splice(e.index,1)}}}),e.length===e.index+1?a("i",{staticClass:"iconfont icon-plus",style:{color:"#409EFF",margin:"0 5px",cursor:"pointer","vertical-align":"middle"},on:{click:t.addFilter}}):t._e()]}}],null,!1,3834420071)})],2)]:t._e(),"enum"===t.form.type?[a("el-form-item",{attrs:{label:"枚举值",required:""}},[a("el-select",{style:{width:"100%"},attrs:{multiple:"",filterable:"","allow-create":"","default-first-option":"","no-data-text":"请输入选择添加",placeholder:"请输入枚举值"},model:{value:t.form.tabs[t.form.type].items,callback:function(e){t.$set(t.form.tabs[t.form.type],"items",e)},expression:"form.tabs[form.type].items"}},t._l([],function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1)]:t._e(),"custom"===t.form.type?[a("el-form-item",{attrs:{label:"自定义sql",required:""}},[a("el-input",{attrs:{type:"textarea"},model:{value:t.form.tabs[t.form.type].expression,callback:function(e){t.$set(t.form.tabs[t.form.type],"expression",e)},expression:"form.tabs[form.type].expression"}})],1)]:t._e()]:t._e()],2),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){return t.$emit("close")}}},[t._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(e){"w"===t.type?t.wsave():t.save()}}},[t._v("保存")])],1)],1)},d=[],p=a("ff4c"),f=a("d032"),m=a("b5ec"),h={components:{propertyChart:m["a"]},props:{visible:{type:Boolean,default:!1},type:{type:String,default:"y"},obj:{type:Object,default:function(){return{}}}},data:function(){return{form:{}}},computed:{getOpeList:function(){return"string"===this.form.dataType?p["b"]:p["a"]},title:function(){return"y"===this.type?"simple"===this.form.type?"度量":"度量自定义":"过滤"},setLabel:function(){var t=this.form.label.split(" "),e=Object(l["a"])(t,2),a=e[0],n=e[1];return p["f"][this.form.aggregate]+(n||a)}},created:function(){this.rules={label:[{required:!0,message:"请输入度量名称",trigger:"change"}],expression:[{required:!0,message:"请输入自定义sql表达式",trigger:"change"}],formatNum:[{required:!0,message:"请输入小数位数",trigger:"change"}]},this.timeList=p["c"],this.ySetTypeList=p["e"],this.form=Object(f["a"])(this.obj),"w"===this.type&&this.wDataSet(!0)},methods:{wDataSet:function(t){var e=this.form,a=e.label,n=e.column,s=e.dataType,i=e.dmType,r=e.type,l=e.expression,o=e.items,c=e.conditions,u=e.logical,d=e.tabs,p=e.aggregate,f=e.index,m={label:a,column:n,dataType:s,dmType:i,type:r,aggregate:p,index:f};t?(m.tabs={custom:{expression:null},enum:{items:[]},condition:{logical:"or",conditions:[]},absolute:{logical:"or",conditions:[]},relative:{logical:"or",conditions:[]}},"custom"===r?m.tabs[r]={expression:l}:"enum"===r?m.tabs[r]={items:o||[]}:(m.tabs[r].logical=u||"or",m.tabs[r].conditions=c||[])):Object.assign(m,d[r]),this.form=m},addFilter:function(){var t={operator:"=",value:null};"absolute"===this.form.type?t.value="":"relative"===this.form.type&&(t.direction="prev",t.unit="day");var e=this.form.tabs[this.form.type].conditions;e.push(t)},save:function(){var t=this;this.$refs.form.validate(function(e){return!!e&&("y"===t.type&&"simple"===t.form.type&&(t.form.label=t.setLabel),t.$emit("save",t.form),t.$emit("close"),!0)})},wsave:function(){var t=this.form.tabs[this.form.type];if("custom"!==this.form.type||t.expression)if("enum"!==this.form.type||0!==t.items.length){if("custom"!==this.form.type&&"enum"!==this.form.type)for(var e=0,a=t.conditions.length;e<a;e+=1)if(!t.conditions[e].value)return void this.$message({type:"warning",message:"条件有未填项"});this.wDataSet(),this.$emit("save",this.form),this.$emit("close")}else this.$message({type:"warning",message:"请输入枚举值"});else this.$message({type:"warning",message:"请输入自定义表达式"})}}},b=h,y=a("2877"),v=Object(y["a"])(b,u,d,!1,null,null,null),g=v.exports;function x(t,e){return"metric"===e.type&&"Select"!==t.data.type?(t.$message({type:"warning",message:"维度只能添加维度属性"}),!0):"Select"===t.data.type&&t.data.params.dimensions.length>1?(t.$message({type:"warning",message:"最多添加两列"}),!0):t.dimensionsMap[e.name]===e.label&&(t.$message({type:"warning",message:"重复添加"}),!0)}function k(t,e,a,n){for(var s=0,i=n.length;s<i;s+=1){var r=Object(l["a"])(n[s],2),o=r[0],c=r[1],u=c+a.label;if(!t.metricsMap[u]){e.aggregate=o,e.label=u,t.metricsMap[u]=!0;break}}}function C(t,e,a){var n=t.type,s=t.params;if("Line"===n||"Bar"===n||"Comb"===n){var i=s.dimensions.length,r=s.metrics.length;if("dimensions"===a){if("Comb"===n&&i>0||i>0&&r>1||i>1)return e.$message({type:"warning",message:"维度已不能再添加"}),!0}else if("metrics"===a&&r>0&&i>1)return e.$message({type:"warning",message:"度量已不能再添加"}),!0}else if("Pie"===n){if(s[a].length>0)return e.$message({type:"warning",message:"".concat("dimensions"===a?"维度":"度量","最多添加一个")}),!0}else if("Label"===n&&s[a].length>2)return e.$message({type:"warning",message:"度量最多添加三个"}),!0;return!1}function w(t,e,a,n){var s=0;t.rows.forEach(function(t){"dimension"===t.dmType&&(s+=1)});var i=t.rows.length>0&&t.rows.length===s,r="rows"===t.data.params.hasMetric&&t.rows.length===Object.keys(t.metricsMap).length,o="columns"===t.data.params.hasMetric&&t.columns.length===Object.keys(t.metricsMap).length;if("rows"===n&&t.rows.length>1&&!i&&!r)return t.$message({type:"warning",message:"行已经不满足添加条件"}),!0;if("columns"===n&&t.columns.length>1&&t.rows.length>0&&(!i||!o))return t.$message({type:"warning",message:"列的个数最多两个"}),!0;if("dimension"===e.type){if(t.dimensionsMap[e.name]===e.label)return t.$message({type:"warning",message:"重复添加"}),!0;t.dimensionsMap[e.name]=e.label}else{if(t.data.params.hasMetric&&t.data.params.hasMetric!==n)return t.$message({type:"warning",message:"".concat("rows"===n?"列":"行","上已经有度量时，不能再添加度量")}),!0;a.label=null;for(var c=0,u=t.keyList.length;c<u;c+=1){var d=Object(l["a"])(t.keyList[c],2),p=d[0],f=d[1],m=f+e.label;if(!t.metricsMap[m]){a.aggregate=p,a.label=m,t.metricsMap[m]=!0;break}}if(!a.label)return t.$message({type:"warning",message:"同一属性计算方法已经添加满，无法再添加"}),!0;t.data.params.hasMetric=n,a.type="simple",a.formatType="number",a.formatNum=0}return!1}function S(t,e){for(var a=t.type,n=t.params,s=n.filters,i=0;i<s.length;i+=1)if(!s[i].conditions||0===s[i].conditions.length)return e.$message({type:"warning",message:"《 ".concat(s[i].label," 》请指定过滤条件")}),!0;if("Select"===a){if(!n.dimensions.length)return e.$message({type:"warning",message:"筛选列必填"}),!0}else if("Line"===a||"Bar"===a||"Comb"===a||"Pie"===a){if(!n.dimensions.length||!n.metrics.length)return e.$message({type:"warning",message:"维度或度量必填"}),!0}else if("Lou"===a||"Label"===a){if(!n.metrics.length)return e.$message({type:"warning",message:"度量必填"}),!0}else if("Table"===a){if(!n.hasMetric)return e.$message({type:"warning",message:"行列必选度量"}),!0;if(!n.rows.length||!n.columns.length)return e.$message({type:"warning",message:"行列必填"}),!0}return!1}var _={components:{draggable:c.a,chartDialog:g},props:{data:{type:Object,default:function(){return{}}},showItem:{type:Array,default:function(){return[]}}},data:function(){return{dialogVisible:!1,dialogType:null,dialogObj:{},typeActive:null,dimensions:[],dimensionsMap:{},metrics:[],metricsMap:{},filters:[],rows:[],columns:[],sortBy:[]}},computed:{sortList:function(){var t=this,e=[];e="Table"===this.data.type?this.rows.concat(this.columns):this.dimensions.concat(this.metrics);var a=[];return e.forEach(function(e){var n=e.aggregate?"".concat(e.aggregate.toUpperCase(),"(").concat(e.column,")"):e.column||e.expression;a.push({column:n,label:e.label,disabled:!t.sortBy.every(function(t){return t.column!==n})})}),a}},created:function(){this.keyList=Object.entries(p["f"]),"Table"===this.data.type?this.tableInit():this.init()},methods:{init:function(){var t=this;Object.keys(this.data.params).length<1&&(this.data.params={dataSetId:null,dataSetType:null,dataSetName:null,pageSize:1e3,dimensions:[],metrics:[],filters:[],sortBy:[]});var e=this.data.params,a=e.dimensions,n=e.metrics,s=e.filters,i=e.sortBy;this.dimensions=a,this.metrics=n,this.filters=s,this.sortBy=i,this.dimensions.forEach(function(e){t.dimensionsMap[e.column]=e.label}),this.metrics.forEach(function(e){t.metricsMap[e.label]=!0})},tableInit:function(){var t=this;Object.keys(this.data.params).length<1&&(this.data.params={dataSetId:null,dataSetType:null,dataSetName:null,pageNo:1,pageSize:1e3,hasMetric:null,rows:[],columns:[],filters:[],sortBy:[]});var e=this.data.params,a=e.rows,n=e.columns,s=e.filters,i=e.sortBy;this.rows=a,this.columns=n,this.filters=s,this.sortBy=i,this.rows.forEach(function(e){"dimension"===e.dmType?t.dimensionsMap[e.column]=e.label:(t.metricsMap[e.label]=!0,t.data.params.hasMetric="rows")}),this.columns.forEach(function(e){"dimension"===e.dmType?t.dimensionsMap[e.column]=e.label:(t.metricsMap[e.label]=!0,t.data.params.hasMetric="columns")})},addSort:function(){var t=this.sortBy.length;!t||this.sortBy[t-1].column?this.sortBy.push({column:null,asc:!0}):this.$message.warning("有下拉项未选择")},delSort:function(t){this.sortBy.splice(t,1)},xSet:function(t){var e=x(this,t);e||(e=C(this.data,this,"dimensions"),e||(this.dimensionsMap[t.name]=t.label,this.dimensions.push({label:t.label,column:t.name,dataType:t.dataType,dmType:t.type})))},ySet:function(t){var e={type:"simple",column:t.name,dataType:t.dataType,dmType:t.type,formatType:"number",formatNum:0};if(k(this,e,t,this.keyList),e.label){var a=C(this.data,this,"metrics");a||this.metrics.push(e)}else this.$message({type:"warning",message:"同一属性计算方法已经添加满，无法再添加"})},wSet:function(t){var e="dimension"===t.type?null:"sum",a={aggregate:e,label:p["f"][e]+t.label,column:t.name,dataType:t.dataType,dmType:t.type,type:"time"===t.dataType?"absolute":"condition",logical:"or",conditions:null};this.filters.push(a)},rSet:function(t){var e={label:t.label,column:t.name,dataType:t.dataType,dmType:t.type},a=w(this,t,e,"rows");a||this.rows.push(e)},cSet:function(t){var e={label:t.label,column:t.name,dataType:t.dataType,dmType:t.type},a=w(this,t,e,"columns");a||this.columns.push(e)},drop:function(t,e){var a=this,n=t.dataTransfer.getData("data");if(n)n=JSON.parse(n),this.$parent.validDataSet(n).then(function(t){"clear"===t&&(a.dimensionsMap={},a.metricsMap={},a.dimensions.length=0,a.metrics.length=0,a.filters.length=0,a.rows.length=0,a.columns.length=0),a["".concat(e,"Set")](n)});else if(this.tempDragData&&this.tempDragData.Type!==e){var s=this.tempDragData,i=s.item,r=s.Type,l=i.label,o=i.dataType,c=i.column,u=i.dmType;this.timeout&&(clearTimeout(this.timeout),this.timeout=null),this.timeout=setTimeout(function(){var t=null,n="r"===r?a.rows:a.columns;if("dimension"===u){for(var s=0,d=n.length;s<d;s+=1)if(n[s].label===l){t=s;break}a.tableDel(n,t,i),a["".concat(e,"Set")]({label:l,dataType:o,name:c,type:u})}else{var p=[],f=n.length;while(f)f-=1,"metric"===n[f].dmType&&(p.push(n[f]),a.tableDel(n,f,n[f]));p.forEach(function(t){var n=t.label.split(" ")[1];a["".concat(e,"Set")]({label:n,dataType:t.dataType,name:t.column,type:t.dmType})})}},0)}},mousedown:function(t,e,a){this.tempDragData={item:t,idx:e,Type:a}},delType:function(t,e,a,n){"x"===a?delete this.dimensionsMap[n.column]:"y"===a&&delete this.metricsMap[n.label],t.splice(e,1)},tableDel:function(t,e,a){"dimension"===a.dmType?delete this.dimensionsMap[a.column]:(delete this.metricsMap[a.label],Object.keys(this.metricsMap).length<1&&(this.data.params.hasMetric=null)),t.splice(e,1)},customType:function(t){this.dialogVisible=!0,this.dialogObj={type:"custom",label:null,expression:null,dataType:"sql"},this.dialogType="y",this.tableMask=t},editDimension:function(t,e,a,n){t.index=e,this.dialogVisible=!0,this.dialogObj=t,this.dialogType=a,this.tableMask=n},dialogSave:function(t){if("y"===this.dialogType){var e="Table"===this.data.type?this.tableMask:"metrics",a=t.index;delete t.index;var n=void 0===a?null:this[e][a].label;if(this.metricsMap[t.label]&&t.label!==n)return void this.$message({type:"warning",message:"添加或修改产生重复"});void 0===a?this[e].push(t):(delete this.metricsMap[this[e][a].label],this[e].splice(a,1,t)),this.metricsMap[t.label]=!0}if("w"===this.dialogType){var s=t.index;delete t.index;var i=t.label,r=t.aggregate,o=i.split(" "),c=Object(l["a"])(o,2),u=c[0],d=c[1];t.label=p["f"][r]+(d||u),this.filters.splice(s,1,t)}}}},T=_,$=(a("dad6"),Object(y["a"])(T,i,r,!1,null,"28785d22",null)),L=$.exports,j={components:{chartXYW:L},props:{data:{type:Object,default:function(){return{}}}},data:function(){return{copyData:Object(f["a"])(this.data)}},computed:{showItem:function(){return"Lou"===this.data.type||"Label"===this.data.type?["y","w","s"]:"Select"===this.data.type?["x","w","s"]:"Table"===this.data.type?["r","c","w","s"]:["x","y","w","s"]}},methods:{validDataSet:function(t){var e=this;return new Promise(function(a){var n=e.copyData.params,s=n.dataSetType,i=n.dataSetId;s?s!==t.dataSetType||i!==t.dataSetId?e.$confirm("发现数据集已经改变,会清空之前的选项，是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object.assign(e.copyData.params,{dataSetId:t.dataSetId,dataSetType:t.dataSetType,dataSetName:t.dataSetName}),a("clear")}).catch(function(){}):a():(Object.assign(e.copyData.params,{dataSetId:t.dataSetId,dataSetType:t.dataSetType,dataSetName:t.dataSetName}),a())})},setAxis:function(){if(this.data.styles.xAxis){if(this.data.styles.xAxis[0].select=this.data.params.dimensions,"Comb"===this.data.type){var t=this.data.params.metrics.length;this.data.styles.yAxis[0].select=this.data.params.metrics.slice(0,t-1),this.data.styles.yAxis[1].select=[this.data.params.metrics[t-1]]}else this.data.styles.yAxis[0].select=this.data.params.metrics,this.data.styles.yAxis[1].select=[];this.data.params.changeData=!0}},apply:function(){var t=S(this.copyData,this);t||(this.data.params=Object(f["a"])(this.copyData.params),this.setAxis(),this.$store._vm.$emit("".concat(this.data.i,"update").concat(this.$store.state.panel.preView),this.data))}}},O=j,D=(a("cd02"),Object(y["a"])(O,n,s,!1,null,"16e40e02",null));e["a"]=D.exports},ddc6:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"tableC"},[a("div",{staticClass:"table"},[a("el-table",{attrs:{data:t.tableData}},[t.list.length>0&&t.styles.indexNo?a("el-table-column",{key:"indexNo",attrs:{type:"index"}}):t._e(),t._l(t.list,function(e,n){return a("Column",{key:n+t.key,attrs:{obj:t.styles,thousands:t.columnsPropsList,item:e}})})],2)],1),t._t("default")],2)},s=[],i=(a("6762"),a("2fdb"),a("ac6a"),a("456d"),a("caf0")),r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-table-column",{attrs:{sortable:!t.item.children,prop:t.item.prop+"",align:t.obj.position,label:t.item.label+""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n    "+t._s(t._f("thousandsFilter")(e.row[t.item.prop],t.item.prop,t.thousands))+"\n  ")]}}])},[t.item.children?t._l(t.item.children,function(e,n){return a("Column",{key:n+t.key,attrs:{obj:t.obj,item:e}})}):t._e()],2)},l=[],o=a("ed08"),c={name:"Column",filters:{thousandsFilter:function(t,e,a){return t&&a.includes(e)?Object(o["a"])(t):t||"-"}},props:{obj:{type:Object,default:function(){return{}}},item:{type:Object,default:function(){return{}}},thousands:{type:Array,default:function(){return[]}}},computed:{key:function(){return(new Date).getTime()}}},u=c,d=a("2877"),p=Object(d["a"])(u,r,l,!1,null,null,null),f=p.exports,m=a("d032"),h={name:"TableComp",components:{Column:f},props:{data:{type:Object,default:function(){return{}}}},data:function(){return{loading:!1,list:[],tableData:[],key:1,styles:this.data.styles,extra:[]}},created:function(){var t=this;this.preView=this.$store.state.panel.preView,this.$store._vm.$on("".concat(this.data.i,"update").concat(this.preView),function(e){t.queryChartData(e)}),this.$store._vm.$on("".concat(this.data.i,"search").concat(this.preView),function(e){t.searchInit=!0,t.extra=e,t.queryChartData(t.data)})},destroyed:function(){this.$store._vm.$off("".concat(this.data.i,"update").concat(this.preView)),this.$store._vm.$off("".concat(this.data.i,"search").concat(this.preView))},mounted:function(){this.searchInit||this.init()},methods:{init:function(){Object.keys(this.data.params).length>0&&this.queryChartData(this.data)},hasType:function(t,e){for(var a=0,n=t.length;a<n;a+=1)if(t[a].dmType===e)return!0;return!1},deepTitle:function(t,e,a,n,s){var i=a[n],r=i.aggregate,l=i.column,o=i.expression,c=i.label,u=r?"".concat(r.toUpperCase(),"(").concat(l,")"):l||o;n===a.length-1?t.push({label:e?e[u]:c,prop:"".concat(s)}):(t.push({label:e?e[u]:c,children:[]}),this.deepTitle(t[0].children,e,a,n+1,s))},rowsAllDim:function(t,e,a){var n=this,s=[];this.deepTitle(s,null,a,0,-1),this.list.push(s[0]),t.forEach(function(t,e){s=[],n.deepTitle(s,t,a,0,e),n.list.push(s[0])}),e.forEach(function(e){var a=e.aggregate,s=e.column,i=e.expression,r=e.label,l=a?"".concat(a.toUpperCase(),"(").concat(s,")"):s||i,o={"-1":r};t.forEach(function(t,e){o[e]=t[l]}),n.tableData.push(o)})},rowsHasDM:function(t,e,a){var n=this,s=a[0].column||a[0].expression,i=a[1]?a[1].column||a[1].expression:null,r=e[0].aggregate?"".concat(e[0].aggregate.toUpperCase(),"(").concat(e[0].column,")"):e[0].column||e[0].expression,l=e[1].aggregate?"".concat(e[1].aggregate.toUpperCase(),"(").concat(e[1].column,")"):e[1].column||e[1].expression,o={},c=e[0],u=c.dmType,d=c.label;t.forEach(function(t){if(i){var c=o[t[s]];c&&!c.includes(t[i])?o[t[s]].push(t[i]):c||(o[t[s]]=[t[i]])}else o[t[s]]=t[s];var d={},p=i?"".concat(t[a[0].column],"-").concat(t[a[1].column]):t[a[0].column],f="dimension"===u?1:0;d[e[f].label]=e[f].label,d[p]=t["dimension"===u?l:r],Object.assign(d,t),n.tableData.push(d)}),"dimension"===u?(this.list.push({label:d,prop:r}),this.list.push({label:a[0].label,children:[{label:"度量",prop:e[1].label}]})):(this.list.push({label:"度量",prop:e[0].label}),this.list.push({label:a[0].label,children:[{label:e[1].label,prop:l}]})),Object.keys(o).forEach(function(t){if(i){var e=[];o[t].forEach(function(a){e.push({label:a,prop:"".concat(t,"-").concat(a)})}),n.list.push({label:t,children:e})}else n.list.push({label:t,prop:t})})},columnsHasDM:function(t,e,a){var n=this,s=a[0].dmType,i=a[0].aggregate?"".concat(a[0].aggregate.toUpperCase(),"(").concat(a[0].column,")"):a[0].column||a[0].expression,r=a[1].aggregate?"".concat(a[1].aggregate.toUpperCase(),"(").concat(a[1].column,")"):a[1].column||a[1].expression,l=[],o=[];t.forEach(function(t){var e="metric"===s?r:i;l.push(t[e]);var a={};a[t[e]]=t[e===i?r:i],n.tableData.push(Object.assign(a,t))}),e.forEach(function(t,i){i===e.length-1?n.list.push({label:"metric"===s?"度量":a[0].label,children:[{label:t.label,prop:t.column}]}):n.list.push({label:t.label,prop:t.column})}),"metric"===s?(l.forEach(function(t){o.push({label:t,prop:t})}),this.list.push({label:a[0].label,children:o})):l.forEach(function(t){n.list.push({label:t,children:[{label:a[1].label,prop:t}]})})},applyChart:function(t,e){var a=this;this.key+=1,this.list=[],this.tableData=[];var n=e.params,s=n.hasMetric,i=n.rows,r=n.columns;"columns"!==s||this.hasType(r,"dimension")?"rows"!==s||this.hasType(i,"dimension")?"rows"===s&&this.hasType(i,"dimension")?this.rowsHasDM(t,i,r):"columns"===s&&this.hasType(i,"dimension")&&this.columnsHasDM(t,i,r):this.rowsAllDim(t,i,r):(i.concat(r).forEach(function(t){var e=t.aggregate,n=t.column,s=t.expression,i=t.label,r=e?"".concat(e.toUpperCase(),"(").concat(n,")"):n||s;a.list.push({label:i,prop:r})}),this.tableData=t),this.setThousand(e),this.setHeaderUnit(this.list)},setThousand:function(t){var e=this,a=t.params.columns;this.columnsPropsList=[],a.forEach(function(t){var a=t.aggregate,n=t.column,s=t.expression,i=t.formatThousand,r=a?"".concat(a.toUpperCase(),"(").concat(n,")"):n||s;i&&e.columnsPropsList.push(r)})},setHeaderUnit:function(t){var e=this;if(t.length&&t[0].children){var a={};t.forEach(function(t){var e=t.label,n=t.children;a[e]?a[e]=a[e].concat(n):a[e]=n}),t.length=0,Object.keys(a).forEach(function(n){t.push({label:n,children:a[n]}),e.setHeaderUnit(a[n])})}},queryChartData:function(t){var e=this;this.loading=!0;var a=t.params,n=t.type,s=t.i,r=this.$route.params,l=r.id,o=r.state;Object(i["d"])({params:a,extra:this.extra,compQuery:{compId:s,dashBoardId:"create"===l?null:l,dashBoardStage:"online"===o?3:null}},n).then(function(a){e.exportData=a,e.applyChart(a.result,Object(m["a"])(t))}).finally(function(){e.loading=!1})}}},b=h,y=(a("563b"),Object(d["a"])(b,n,s,!1,null,"4cdf3d24",null));e["default"]=y.exports},dde4:function(t,e,a){},e003:function(t,e,a){},e43c:function(t,e,a){},e4b8:function(t,e,a){},e61b:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}]},[a("div",{ref:"chart",staticClass:"charts"}),t._t("default")],2)},s=[],i=(a("ac6a"),a("456d"),a("313e")),r=a.n(i),l=a("caf0"),o=a("d032"),c={props:{data:{type:Object,default:function(){return{}}}},data:function(){return{loading:!1,extra:[]}},watch:{"$store.state.panel.theme":function(){this.myChart.dispose(),this.myChart=r.a.init(this.$refs.chart,this.$store.state.panel.theme),this.init()},"data.styles":{handler:function(){Object.keys(this.data.params).length<1||this.data.params.changeData?delete this.data.params.changeData:this.$emit("apply",{res:this.res,chartData:Object(o["a"])(this.data),myChart:this.myChart})},deep:!0}},created:function(){var t=this;this.preView=this.$store.state.panel.preView,this.$store._vm.$on("".concat(this.data.i,"update").concat(this.preView),function(e){t.queryChartData(e)}),this.$store._vm.$on("".concat(this.data.i,"search").concat(this.preView),function(e){t.searchInit=!0,t.extra=e,t.queryChartData(t.data)})},mounted:function(){this.myChart=r.a.init(this.$refs.chart,this.$store.state.panel.theme),this.searchInit||this.init()},destroyed:function(){this.$store._vm.$off("".concat(this.data.i,"update").concat(this.preView)),this.$store._vm.$off("".concat(this.data.i,"search").concat(this.preView))},methods:{init:function(){var t=this.data.params,e=t.dimensions,a=t.metrics;e&&a&&e.length>0&&a.length>0&&this.queryChartData(this.data)},queryChartData:function(t){var e=this;this.loading=!0;var a=t.params,n=t.type,s=t.i,i=this.$route.params,r=i.id,c=i.state;Object(l["d"])({params:a,extra:this.extra,compQuery:{compId:s,dashBoardId:"create"===r?null:r,dashBoardStage:"online"===c?3:null}},n).then(function(a){e.res=a,e.$emit("apply",{res:a,chartData:Object(o["a"])(t),myChart:e.myChart})}).finally(function(){e.loading=!1})}}},u=c,d=(a("9986"),a("2877")),p=Object(d["a"])(u,n,s,!1,null,"5a57d4bd",null);e["a"]=p.exports},eaf9:function(t,e,a){},ed08:function(t,e,a){"use strict";a.d(e,"a",function(){return s});a("6b54"),a("a481"),a("c5f6"),a("ee1d"),a("28a5");var n=a("768b");function s(t){var e="".concat(t).split("."),a=Object(n["a"])(e,2),s=a[0],i=a[1];if(s=parseFloat(s),Number.isNaN(s))return null;if(s=(s||0).toString(10).replace(/(\d{1,3})(?=(\d{3})+$)/g,"$1,"),i){var r=parseFloat(i);if(Number.isNaN(r))return null;i=".".concat(i),s+=i}return s}},ed4f:function(t,e,a){"use strict";var n=a("bd2f"),s=a.n(n);s.a},ed52:function(t,e,a){"use strict";var n=a("5e74"),s=a.n(n);s.a},ed5a:function(t,e,a){"use strict";var n=a("1202"),s=a.n(n);s.a},eeb4:function(t,e,a){"use strict";var n=a("4cd2"),s=a.n(n);s.a},ef01:function(t,e,a){"use strict";var n=a("35de"),s=a.n(n);s.a},f617:function(t,e,a){},fd69:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Chart",{attrs:{data:t.data},on:{apply:t.applyChart}},[t._t("default")],2)},s=[],i=(a("7514"),a("7f7f"),a("ac6a"),a("e61b")),r=a("ed08"),l={name:"LouComp",components:{Chart:i["a"]},props:{data:{type:Object,default:function(){return{}}}},methods:{applyChart:function(t){var e=t.res,a=t.chartData,n=t.myChart;this.exportData=e;var s=e.result;this.myChart=n;var i=a.styles,l=a.params,o=l.metrics,c=[],u=[],d=0,p=0;o.forEach(function(t){c.push(t.label);var e=s[0][t.aggregate?"".concat(t.aggregate.toUpperCase(),"(").concat(t.column,")"):t.column||t.expression];d=e<d?e:d,p=e>p?e:p,u.push({name:t.label,value:e})}),i.tooltip.formatter=function(t){var e=t.seriesName,n=t.name,s=t.value,i=t.marker,l=t.percent,o=a.params.metrics.find(function(t){return t.label===n}),c=o.formatThousand,u=o.formatType,d=o.formatNum,p=("percent"===u?100*s:s).toFixed(d);return p=c?Object(r["a"])(p):p,p="percent"===u?"".concat(p,"%"):p,"".concat(e,"<br/>").concat(i+n,": ").concat(p," ").concat(l,"%")},i.legend.data=c,i.series[0].min=d,i.series[0].max=p,i.series[0].name=i.label.text,i.series[0].data=u,i.series[0].label=Object.assign(i.labelNormal,{formatter:function(t){var e=t.name,n=t.value,s=t.percent,i=a.params.metrics.find(function(t){return t.label===e}),l=i.formatThousand,o=i.formatType,c=i.formatNum,u=("percent"===o?100*n:n).toFixed(c);return u=l?Object(r["a"])(u):u,u="percent"===o?"".concat(u,"%"):u,"".concat(e," ").concat(u," ").concat(s,"%")}}),this.myChart.resize(),this.myChart.setOption(i,!0)},resize:function(){this.myChart&&this.myChart.resize()}}},o=l,c=a("2877"),u=Object(c["a"])(o,n,s,!1,null,null,null);e["default"]=u.exports},fdff:function(t,e,a){},ff4c:function(t,e,a){"use strict";a.d(e,"d",function(){return i}),a.d(e,"e",function(){return n}),a.d(e,"f",function(){return s}),a.d(e,"a",function(){return l}),a.d(e,"b",function(){return r}),a.d(e,"c",function(){return o});var n=[{label:"原始",value:null},{label:"计数",value:"count"},{label:"求和",value:"sum"},{label:"去重",value:"count_distinct"},{label:"最大值",value:"max"},{label:"最小值",value:"min"},{label:"平均值",value:"avg"}],s={sum:"(求和) ",count:"(计数) ",count_distinct:"(去重) ",max:"(最大值) ",min:"(最小值) ",avg:"(平均值) ",null:""},i=[{name:"维度",type:"x",icon:"icon-weidu"},{name:"度量",type:"y",icon:"icon-duliang"}],r=[{name:"精确匹配",value:"="},{name:"包含",value:"like"},{name:"不包含",value:"not like"},{name:"开头是",value:"start"},{name:"不匹配",value:"!="},{name:"为空",value:"is null"},{name:"不为空",value:"is not null"},{name:"正则匹配",value:"regex"}],l=[{name:"大于",value:">"},{name:"小于",value:"<"},{name:"大于等于",value:">="},{name:"小于等于",value:"<="},{name:"等于",value:"="},{name:"不等于",value:"!="}],o=[{name:"分",value:"minute"},{name:"时",value:"hour"},{name:"日",value:"day"},{name:"周",value:"week"},{name:"月",value:"month"},{name:"年",value:"year"}]}});
//# sourceMappingURL=app.f10833b1.js.map